<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[è‹æ ¼æ‹‰æ²¡æœ‰åº•]]></title>
  <subtitle><![CDATA[åº”è¯¥æ˜¯ä¸ªç¨‹åºå‘˜]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://sugeladi.github.io/"/>
  <updated>2017-01-21T08:25:44.000Z</updated>
  <id>http://sugeladi.github.io/</id>
  
  <author>
    <name><![CDATA[star]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[git revert å’Œ git reset çš„åŒºåˆ«]]></title>
    <link href="http://sugeladi.github.io/2017/01/20/git-revert-%E5%92%8C-git-reset-%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://sugeladi.github.io/2017/01/20/git-revert-å’Œ-git-reset-çš„åŒºåˆ«/</id>
    <published>2017-01-20T03:52:11.000Z</published>
    <updated>2017-01-21T08:25:44.000Z</updated>
    <content type="html"><![CDATA[<h3 id="ä¸»è¦ç”¨äºä¼šé€€gitç‰ˆæœ¬">ä¸»è¦ç”¨äºä¼šé€€gitç‰ˆæœ¬</h3><h5 id="åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­,æˆ‘ä»¬å¶å°”ä¼šé‡åˆ°éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå›é€€å‡ ä¸ªç‰ˆæœ¬çš„éœ€æ±‚,git_resetå’Œgitrevert_éƒ½å¯ä»¥å¤„ç†è¿™ç±»éœ€æ±‚,ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨git_revertã€‚">åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­,æˆ‘ä»¬å¶å°”ä¼šé‡åˆ°éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå›é€€å‡ ä¸ªç‰ˆæœ¬çš„éœ€æ±‚,git resetå’Œgitrevert éƒ½å¯ä»¥å¤„ç†è¿™ç±»éœ€æ±‚,ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨git revertã€‚</h5><ul>
<li><h6 id="git_reset_æ˜¯åˆ é™¤æœ¬æ¬¡æäº¤ï¼Œgit_revertæ˜¯æ’¤é”€æŸæ¬¡commitå¹¶ä¸”ä¼šæŠŠè¿™ä¸ªæ’¤é”€åŠ¨ä½œå½“æˆä¸€æ¬¡æ–°çš„commit-">git reset æ˜¯åˆ é™¤æœ¬æ¬¡æäº¤ï¼Œgit revertæ˜¯æ’¤é”€æŸæ¬¡commitå¹¶ä¸”ä¼šæŠŠè¿™ä¸ªæ’¤é”€åŠ¨ä½œå½“æˆä¸€æ¬¡æ–°çš„commit.</h6></li>
<li><h6 id="git_resetæ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œgit_revertæ˜¯å‘å‰ç§»åŠ¨äº†ä¸€ä¸‹">git resetæ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œgit revertæ˜¯å‘å‰ç§»åŠ¨äº†ä¸€ä¸‹</h6></li>
<li><h6 id="git_resetæ—¶ç›´æ¥åˆ é™¤åˆ¶å®šcommitï¼Œè€Œgitrevertæ˜¯ç”¨æ–°çš„commitæ¥å›æ»šä¹‹å‰çš„commit">git resetæ—¶ç›´æ¥åˆ é™¤åˆ¶å®šcommitï¼Œè€Œgitrevertæ˜¯ç”¨æ–°çš„commitæ¥å›æ»šä¹‹å‰çš„commit</h6></li>
</ul>
<h4 id="1-git_reset">1.git reset</h4><p>git reset å¤„ç†æœ¬åœ°æäº¤å¾ˆå¥½ç”¨ï¼Œç›´æ¥ä½¿ç”¨.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="operator"><span class="keyword">reset</span> <span class="comment">--hard commit_id //commit_id ç‰ˆæœ¬å· æœ¬åœ°ä»£ç å›é€€  </span></span><br><span class="line">$ git push origin <span class="keyword">HEAD</span> <span class="comment">--force //å¼ºåˆ¶æäº¤åˆ°è¿œç¨‹</span></span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="operator"><span class="keyword">reset</span> <span class="comment">--hard HEAR~1</span></span><br><span class="line">$ git push <span class="comment">--force //å¼ºåˆ¶æäº¤åˆ°è¿œç¨‹</span></span></span><br></pre></td></tr></table></figure>
<h4 id="2-git_revert">2.git revert</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git revert commit_id <span class="comment">//commit_id ç‰ˆæœ¬å· æœ¬åœ°ä»£ç å›é€€</span></span><br><span class="line">$ git <span class="keyword">push</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="ä¸»è¦ç”¨äºä¼šé€€gitç‰ˆæœ¬">ä¸»è¦ç”¨äºä¼šé€€gitç‰ˆæœ¬</h3><h5 id="åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­,æˆ‘ä»¬å¶å°”ä¼šé‡åˆ°éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šå›é€€å‡ ä¸ªç‰ˆæœ¬çš„éœ€æ±‚,git_resetå’Œgitrevert_éƒ½å¯ä»¥å¤„ç†è¿™ç±»éœ€æ±‚,ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨git_revertã€‚">åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­,æˆ‘ä»¬]]>
    </summary>
    
      <category term="git" scheme="http://sugeladi.github.io/tags/git/"/>
    
      <category term="git" scheme="http://sugeladi.github.io/categories/git/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golang mysql 1461 and Invalid Connection]]></title>
    <link href="http://sugeladi.github.io/2016/12/22/golang-mysql-1461-and-Invalid-Connection/"/>
    <id>http://sugeladi.github.io/2016/12/22/golang-mysql-1461-and-Invalid-Connection/</id>
    <published>2016-12-22T05:24:52.000Z</published>
    <updated>2016-12-22T05:38:29.000Z</updated>
    <content type="html"><![CDATA[<h3 id="1-Invalid_Connection">1.Invalid Connection</h3><h5 id="go-mysqlçš„è¿æ¥æ± åªæœ‰ä¸¤ä¸ªå‚æ•°MaxIdleConns_ä¸_MaxOpenConns">go-mysqlçš„è¿æ¥æ± åªæœ‰ä¸¤ä¸ªå‚æ•°MaxIdleConns ä¸ MaxOpenConns</h5><h5 id="golangä½¿ç”¨mysqlå®˜æ–¹é©±åŠ¨æ—¶ï¼Œç”¨äº†mysqlè¿æ¥æ± (å¦‚æœMaxIdleConns_ä¸_MaxOpenConnsä¸ç›¸ç­‰)ï¼Œæœ‰æ—¶ä¼šçœ‹åˆ°å¤§é‡çš„_statement-go:27:_Invalid_Connection_ä¸€ç•ªæŸ¥è¯¢ä¹‹åï¼Œå‘ç°åº•å±‚é©±åŠ¨æœ‰è¿™ä¸ªè­¦å‘Šï¼Œæœ€å¥½è®¾ç½®MaxIdleConnså’ŒMaxOpenConnsç›¸ç­‰ã€‚å°±ä¸ä¼šæœ‰è¿™ä¸ªwarningä¿¡æ¯äº†ï¼Œä¸è¿‡è¿™ä¸ªwarningä¿¡æ¯æ—¶æ— å®³çš„ã€‚å¦‚æœæœ‰å¼ºè¿«ç—‡çš„åŒå­¦ï¼Œè¿˜æ˜¯è®¾ç½®ç›¸ç­‰å§ã€‚GitHubåœ°å€">golangä½¿ç”¨mysqlå®˜æ–¹é©±åŠ¨æ—¶ï¼Œç”¨äº†mysqlè¿æ¥æ± (å¦‚æœMaxIdleConns ä¸ MaxOpenConnsä¸ç›¸ç­‰)ï¼Œæœ‰æ—¶ä¼šçœ‹åˆ°å¤§é‡çš„  statement.go:27: Invalid Connection ä¸€ç•ªæŸ¥è¯¢ä¹‹åï¼Œå‘ç°åº•å±‚é©±åŠ¨æœ‰è¿™ä¸ªè­¦å‘Šï¼Œæœ€å¥½è®¾ç½®MaxIdleConnså’ŒMaxOpenConnsç›¸ç­‰ã€‚å°±ä¸ä¼šæœ‰è¿™ä¸ªwarningä¿¡æ¯äº†ï¼Œä¸è¿‡è¿™ä¸ªwarningä¿¡æ¯æ—¶æ— å®³çš„ã€‚å¦‚æœæœ‰å¼ºè¿«ç—‡çš„åŒå­¦ï¼Œè¿˜æ˜¯è®¾ç½®ç›¸ç­‰å§ã€‚<a href="https://github.com/go-sql-driver/mysql/issues/185" target="_blank" rel="external">GitHubåœ°å€</a></h5><h3 id="2-Error_1461:_Canâ€™t_create_more_than_max_prepared_stmt_count_statements_(current_value:_16382)">2.Error 1461: Canâ€™t create more than max_prepared_stmt_count statements (current value: 16382)</h3><h5 id="è¿™ä¸ªéœ€è¦æ³¨æ„ï¼Œå†ä½¿ç”¨äº†_Prepare_ä¹‹åè®°å¾—ï¼Œè¿”å›çš„Stmtè®°å¾—close()_å¦å¤–åœ¨æŸ¥è¯¢å¤šåˆ—Query()è¿”å›çš„Rows_ä¹Ÿè¦å…³é—­">è¿™ä¸ªéœ€è¦æ³¨æ„ï¼Œå†ä½¿ç”¨äº† Prepare ä¹‹åè®°å¾—ï¼Œè¿”å›çš„Stmtè®°å¾—close()  å¦å¤–åœ¨æŸ¥è¯¢å¤šåˆ—Query()è¿”å›çš„Rows ä¹Ÿè¦å…³é—­</h5>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="1-Invalid_Connection">1.Invalid Connection</h3><h5 id="go-mysqlçš„è¿æ¥æ± åªæœ‰ä¸¤ä¸ªå‚æ•°MaxIdleConns_ä¸_MaxOpenConns">go-mysqlçš„è¿æ¥æ± åªæœ‰ä¸¤ä¸ªå‚æ•°MaxIdleConns]]>
    </summary>
    
      <category term="golang mysql" scheme="http://sugeladi.github.io/tags/golang-mysql/"/>
    
      <category term="golang mysql" scheme="http://sugeladi.github.io/categories/golang-mysql/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[iphone å¿˜è®°é”å±å¯†ç åzå¦‚æœæ‰¾å›å¯†ç ]]></title>
    <link href="http://sugeladi.github.io/2016/08/26/iphone-%E5%BF%98%E8%AE%B0%E9%94%81%E5%B1%8F%E5%AF%86%E7%A0%81%E5%90%8Ez%E5%A6%82%E6%9E%9C%E6%89%BE%E5%9B%9E%E5%AF%86%E7%A0%81/"/>
    <id>http://sugeladi.github.io/2016/08/26/iphone-å¿˜è®°é”å±å¯†ç åzå¦‚æœæ‰¾å›å¯†ç /</id>
    <published>2016-08-26T08:31:04.000Z</published>
    <updated>2016-08-26T09:48:57.000Z</updated>
    <content type="html"><![CDATA[<h5 id="ä»Šå¤©æ‰‹æœº(iphone_5s)çš„é”å±å¯†ç ,ä¸çŸ¥ä»€ä¹ˆåŸå› è¢«æ¢æ‰äº†,ç„¶ååœ¨è±†ç“£ä¸Šæ‰¾åˆ°ä¸€ä¸ªå¦¹å­çš„å†™çš„æ–‡ç« ,åœ¨æ–‡ç« çš„å¸®åŠ©ä¸‹,æˆåŠŸé‡ç½®äº†å¯†ç -é™„ä¸Šè±†ç“£åœ°å€">ä»Šå¤©æ‰‹æœº(iphone 5s)çš„é”å±å¯†ç ,ä¸çŸ¥ä»€ä¹ˆåŸå› è¢«æ¢æ‰äº†,ç„¶ååœ¨è±†ç“£ä¸Šæ‰¾åˆ°ä¸€ä¸ªå¦¹å­çš„å†™çš„æ–‡ç« ,åœ¨æ–‡ç« çš„å¸®åŠ©ä¸‹,æˆåŠŸé‡ç½®äº†å¯†ç .é™„ä¸Š<a href="https://www.douban.com/note/328377480/" target="_blank" rel="external">è±†ç“£åœ°å€</a></h5><h2 id="å‰æ">å‰æ</h2><ul>
<li><h3 id="æœ‰ä¸€å°é™¤å»iphoneçš„è‹¹æœè®¾å¤‡">æœ‰ä¸€å°é™¤å»iphoneçš„è‹¹æœè®¾å¤‡</h3></li>
<li><h3 id="æ‰‹æœºå¼€å¯äº†æŸ¥æ‰¾æˆ‘çš„iPhone">æ‰‹æœºå¼€å¯äº†æŸ¥æ‰¾æˆ‘çš„iPhone</h3></li>
<li><h3 id="AppleIDå’Œå¯†ç ï¼ˆé”å±å¯†ç å¿˜è®°ä¹Ÿå°±ç½¢äº†ï¼ŒApple_IDçš„å¯†ç å†å¿˜äº†é‚£å¯å°±çœŸçš„è¦å»éªŒéªŒè„‘äº†ï¼Œé™¤éè¿™æ‰‹æœºä¸æ˜¯ä½ æœ¬äººçš„ï¼‰">AppleIDå’Œå¯†ç ï¼ˆé”å±å¯†ç å¿˜è®°ä¹Ÿå°±ç½¢äº†ï¼ŒApple IDçš„å¯†ç å†å¿˜äº†é‚£å¯å°±çœŸçš„è¦å»éªŒéªŒè„‘äº†ï¼Œé™¤éè¿™æ‰‹æœºä¸æ˜¯ä½ æœ¬äººçš„ï¼‰</h3></li>
</ul>
<h2 id="æ”»ç•¥">æ”»ç•¥</h2><a id="more"></a>
<h3 id="1-å…ˆå»æ‰¾ä¸€å°æœ‰iTunesçš„ç”µè„‘ï¼Œå°†æ‰‹æœºè¿æ¥ä¸Šï¼Œç„¶åå¤‡ä»½æ‰‹æœºåˆ°ç”µè„‘ä¸Š">1.å…ˆå»æ‰¾ä¸€å°æœ‰iTunesçš„ç”µè„‘ï¼Œå°†æ‰‹æœºè¿æ¥ä¸Šï¼Œç„¶åå¤‡ä»½æ‰‹æœºåˆ°ç”µè„‘ä¸Š</h3><h3 id="2-å¤‡ä»½å®Œæˆåï¼Œç™»å½•icloud,è¾“å…¥è´¦å·å¯†ç ï¼Œç‚¹å‡»æŸ¥æ‰¾æˆ‘çš„iPhone">2.å¤‡ä»½å®Œæˆåï¼Œç™»å½•<a href="https://www.icloud.com" target="_blank" rel="external">icloud</a>,è¾“å…¥è´¦å·å¯†ç ï¼Œç‚¹å‡»æŸ¥æ‰¾æˆ‘çš„iPhone</h3><h3 id="3-é€‰æ‹©_æŠ¹æ‰iPhone_(å¯¹å°±æ˜¯æŠ¹æ‰ï¼Œç‚¹ä¸‹å»ï¼Œä¸è¦çŠ¹è±«)">3.é€‰æ‹© æŠ¹æ‰iPhone (å¯¹å°±æ˜¯æŠ¹æ‰ï¼Œç‚¹ä¸‹å»ï¼Œä¸è¦çŠ¹è±«)</h3><h3 id="4-æŠ¹æ‰å®Œæˆåå°±æ˜¯ç™½è‹¹æœå•¦ï¼Œç„¶åå°±æ˜¯å„ç§è®¾ç½®">4.æŠ¹æ‰å®Œæˆåå°±æ˜¯ç™½è‹¹æœå•¦ï¼Œç„¶åå°±æ˜¯å„ç§è®¾ç½®</h3><h3 id="5-å…³é”®çš„ä¸€æ­¥ï¼šæ¥åˆ°iCloudæ­¥éª¤ï¼Œè¿™ä¸€æ­¥å°±æ˜¯æ‰¾å›ä½ ä¹‹å‰å®‰è£…çš„APPï¼Œé€‰æ‹©ä»iTunesæ¢å¤ï¼Œè¿™é‡Œçš„ç…§ç‰‡ã€çŸ­ä¿¡ã€APPéƒ½è¿˜åœ¨-">5.å…³é”®çš„ä¸€æ­¥ï¼šæ¥åˆ°iCloudæ­¥éª¤ï¼Œè¿™ä¸€æ­¥å°±æ˜¯æ‰¾å›ä½ ä¹‹å‰å®‰è£…çš„APPï¼Œé€‰æ‹©ä»iTunesæ¢å¤ï¼Œè¿™é‡Œçš„ç…§ç‰‡ã€çŸ­ä¿¡ã€APPéƒ½è¿˜åœ¨.</h3><p><img src="http://o6yi53w5j.bkt.clouddn.com/945F9728-A87E-4560-9A5F-0267CCDC19A6.png" alt="é€‰æ‹©iTunesæ¢å¤"></p>
<h3 id="6-ç„¶åæ‰‹æœºä¼šä¸€ä¸ªä¸€ä¸ªçš„å»ä¸‹è½½APP">6.ç„¶åæ‰‹æœºä¼šä¸€ä¸ªä¸€ä¸ªçš„å»ä¸‹è½½APP</h3><p><img src="http://o6yi53w5j.bkt.clouddn.com/BAD5E9A909C74402C54425D57737D690.png" alt="å„ä¸ªAPPéƒ½åœ¨æ„‰å¿«çš„ä¸‹è½½"></p>
<h2 id="å¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶_ğŸ˜ƒ">å¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ ğŸ˜ƒ</h2>]]></content>
    <summary type="html">
    <![CDATA[<h5 id="ä»Šå¤©æ‰‹æœº(iphone_5s)çš„é”å±å¯†ç ,ä¸çŸ¥ä»€ä¹ˆåŸå› è¢«æ¢æ‰äº†,ç„¶ååœ¨è±†ç“£ä¸Šæ‰¾åˆ°ä¸€ä¸ªå¦¹å­çš„å†™çš„æ–‡ç« ,åœ¨æ–‡ç« çš„å¸®åŠ©ä¸‹,æˆåŠŸé‡ç½®äº†å¯†ç -é™„ä¸Šè±†ç“£åœ°å€">ä»Šå¤©æ‰‹æœº(iphone 5s)çš„é”å±å¯†ç ,ä¸çŸ¥ä»€ä¹ˆåŸå› è¢«æ¢æ‰äº†,ç„¶ååœ¨è±†ç“£ä¸Šæ‰¾åˆ°ä¸€ä¸ªå¦¹å­çš„å†™çš„æ–‡ç« ,åœ¨æ–‡ç« çš„å¸®åŠ©ä¸‹,æˆåŠŸé‡ç½®äº†å¯†ç .é™„ä¸Š<a href="https://www.douban.com/note/328377480/">è±†ç“£åœ°å€</a></h5><h2 id="å‰æ">å‰æ</h2><ul>
<li><h3 id="æœ‰ä¸€å°é™¤å»iphoneçš„è‹¹æœè®¾å¤‡">æœ‰ä¸€å°é™¤å»iphoneçš„è‹¹æœè®¾å¤‡</h3></li>
<li><h3 id="æ‰‹æœºå¼€å¯äº†æŸ¥æ‰¾æˆ‘çš„iPhone">æ‰‹æœºå¼€å¯äº†æŸ¥æ‰¾æˆ‘çš„iPhone</h3></li>
<li><h3 id="AppleIDå’Œå¯†ç ï¼ˆé”å±å¯†ç å¿˜è®°ä¹Ÿå°±ç½¢äº†ï¼ŒApple_IDçš„å¯†ç å†å¿˜äº†é‚£å¯å°±çœŸçš„è¦å»éªŒéªŒè„‘äº†ï¼Œé™¤éè¿™æ‰‹æœºä¸æ˜¯ä½ æœ¬äººçš„ï¼‰">AppleIDå’Œå¯†ç ï¼ˆé”å±å¯†ç å¿˜è®°ä¹Ÿå°±ç½¢äº†ï¼ŒApple IDçš„å¯†ç å†å¿˜äº†é‚£å¯å°±çœŸçš„è¦å»éªŒéªŒè„‘äº†ï¼Œé™¤éè¿™æ‰‹æœºä¸æ˜¯ä½ æœ¬äººçš„ï¼‰</h3></li>
</ul>
<h2 id="æ”»ç•¥">æ”»ç•¥</h2>]]>
    
    </summary>
    
      <category term="ç”Ÿæ´»" scheme="http://sugeladi.github.io/tags/%E7%94%9F%E6%B4%BB/"/>
    
      <category term="ç”Ÿæ´»" scheme="http://sugeladi.github.io/categories/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golang .slide ä¸‹è½½å®‰è£…ä¸ä½¿ç”¨]]></title>
    <link href="http://sugeladi.github.io/2016/05/10/golang-slide-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <id>http://sugeladi.github.io/2016/05/10/golang-slide-ä¸‹è½½å®‰è£…ä¸ä½¿ç”¨/</id>
    <published>2016-05-10T08:37:15.000Z</published>
    <updated>2016-06-06T05:52:32.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li><p>æ¥æº</p>
<p>  å‚åŠ gopher china 2016çš„å¤§ä¼š,åœ¨ä¼šä¸Šçœ‹åˆ° <a href="https://github.com/davecheney" target="_blank" rel="external">Dave</a>å¤§ç¥ç”¨goçš„ slide æ¥åšæ¼”è®²,è§‰å¾—å¥½é…·,æ ¹æ®<a href="https://www.youtube.com/watch?v=83JBmS8WpHM" target="_blank" rel="external">youtube</a>ä¸Šçš„è§†é¢‘,ç„¶åè‡ªå·±è·Ÿç€åšäº†ä¸€é,ç®—æ˜¯è®°å½•ä¸€ä¸‹å§.</p>
</li>
<li><p>é¦–å…ˆæ˜¯ä¸‹è½½</p>
<p>  ç”±äºGWF( Great FireWall é˜²ç«é•¿åŸ,ä¹Ÿç§°ä¸­å›½é˜²ç«å¢™ ),å¯¼è‡´å»go get golang.org/x/tools/cmd/present ä¸‹è½½ä¸ä¸‹æ¥,è¿™é‡Œæ¨è <a href="http://www.golangtc.com/download/package" target="_blank" rel="external">golangtc</a>,ä¸‹è½½ä¸‹æ¥ä¹‹å,æ”¾åˆ°ä½ è‡ªå·±çš„gopathä¸‹</p>
</li>
<li><p>å®‰è£… present</p>
<p>  go install go/src/golang.org/x/tools/cmd/present/ ä¹‹åä¼šåœ¨gopathçš„binç›®å½•ä¸‹å¤šå‡ºæ¥ä¸€ä¸ª present,</p>
</li>
<li><p>æœ¬åœ°æŸ¥çœ‹</p>
<p>  æœ‰äº†presentå°±å¯ä»¥æŸ¥çœ‹.slideæ–‡ä»¶äº†. ç›´æ¥åœ¨æœ‰.slideæ–‡ä»¶çš„ç›®å½•ä¸‹,è¾“å…¥present,ç„¶åè®¿é—® <a href="http://127.0.0.1:3999/" target="_blank" rel="external">http://127.0.0.1:3999/</a> å°±å¯ä»¥çœ‹åˆ°å•¦.</p>
</li>
<li><p>ç¼–å†™.slideæ–‡ä»¶</p>
<a id="more"></a>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir slide&#10;$ cd slide&#10;$ vi example.slide</span><br></pre></td></tr></table></figure>
<pre><code>example.slide

<span class="comment"><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#25105;&#30340;&#31532;&#19968;&#20010;Slide//&#26631;&#39064;&#10;&#32451;&#20064;&#19968;&#19979;//&#35299;&#37322;&#35828;&#26126;&#10;10 May 2016//&#26102;&#38388; &#36825;&#37324;&#35201;&#27880;&#24847;&#19968;&#19979;&#26684;&#24335;&#10;&#10;&#33487;&#26684;&#25289;&#27809;&#26377;&#24213;//&#33258;&#24049;&#30340;&#21517;&#31216;&#10;http://star.asottt.com//&#33258;&#24049;&#30340;&#32593;&#31449;&#10;lihexingstar@163.com//&#37038;&#31665;&#10;@star//name&#10;&#10;* Formatting//&#25991;&#26412;&#26684;&#24335;&#10;&#10;Let&#39;s *bold* some text.//&#31895;&#20307;&#20351;&#29992; *&#25105;&#26159;&#31895;&#20307;*&#10;Let&#39;s _italicize_ some text.//&#26012;&#20307;&#20351;&#29992; *&#25105;&#26159;&#26012;&#20307;*&#10;&#10;* Images//&#22270;&#29255;&#10;&#10;.image http://7xk2rp.com1.z0.glb.clouddn.com/2011922123813232.jpg//&#22270;&#29255;&#22806;&#38142;&#10;&#10;* Showing Code//&#23637;&#31034;code(&#35265;&#19968;&#19979; hello.go)&#10;&#10;.code hello.go//&#20840;&#37096;&#23637;&#31034;&#10;&#10;* Showing Partial Code//&#37096;&#20998;&#23637;&#31034;&#10;&#10;.code hello.go /show A type/,/end show A type/&#10;.code hello.go /start main OMIT/,/end main OMIT/&#10;.code hello.go /^func printStr/,/&#125;/&#10;&#10;* Running code//&#36816;&#34892;&#20195;&#30721;&#10;&#10;.play hello.go /start main OMIT/,/end main OMIT/      //.play&#36816;&#34892;&#10;&#10;* Bullet Points//&#21015;&#34920;&#10;- bullet point 1&#10;- bullet point 2&#10;- bullet point 3</span><br></pre></td></tr></table></figure></span>


hello.go

<span class="comment"><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//show A type OMIT</span></span><br><span class="line"><span class="keyword">type</span> A <span class="keyword">struct</span>&#123;</span><br><span class="line">    name <span class="typename">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//end show A type OMIT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//start main OMIT</span></span><br><span class="line"><span class="keyword">func</span> main()&#123;</span><br><span class="line">    fmt.Println(<span class="string">"hello world. sugeladi"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//end main OMIT</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> printStr(s <span class="typename">string</span>)&#123;</span><br><span class="line">    fmt.Println(s) <span class="comment">// HL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></span>
</code></pre><ul>
<li><p>å¤–é“¾æ”¾åˆ°go-talks(goå¼€å‘è€…ä½¿ç”¨,ç¬¬ä¸‰æ–¹æœåŠ¡)å’Œtalks.godoc.org(golangå®˜æ–¹æœåŠ¡) éœ€fanqiangçœ‹.</p>
<p>  ä½ æŠŠè‡ªå·±ç¼–å†™çš„.slideæ–‡ä»¶æ”¾åˆ°githubä¸Š,ç„¶åç¼–å†™README</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;[go-talks](http://go-talks.appspot.com/github.com/sugeladi/slide/example.slide#1)&#10;&#10;[golang](http://talks.godoc.org/github.com/sugeladi/slide/example.slide)</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ•ˆæœå¦‚ä¸‹:<br>  <a href="http://go-talks.appspot.com/github.com/sugeladi/slide/example.slide#1" target="_blank" rel="external">go-talks</a></p>
<p>  <a href="http://talks.godoc.org/github.com/sugeladi/slide/example.slide" target="_blank" rel="external">golang</a></p>
<p>  <a href="http://go-talks.appspot.com/github.com/sugeladi/slide/kibana.slide#1" target="_blank" rel="external">kibana-go-talks</a></p>
<p>  <a href="http://talks.godoc.org/github.com/sugeladi/slide/kibana.slide" target="_blank" rel="external">kibana-golang(æ¨èä½¿ç”¨)</a></p>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li><p>æ¥æº</p>
<p>  å‚åŠ gopher china 2016çš„å¤§ä¼š,åœ¨ä¼šä¸Šçœ‹åˆ° <a href="https://github.com/davecheney">Dave</a>å¤§ç¥ç”¨goçš„ slide æ¥åšæ¼”è®²,è§‰å¾—å¥½é…·,æ ¹æ®<a href="https://www.youtube.com/watch?v=83JBmS8WpHM">youtube</a>ä¸Šçš„è§†é¢‘,ç„¶åè‡ªå·±è·Ÿç€åšäº†ä¸€é,ç®—æ˜¯è®°å½•ä¸€ä¸‹å§.</p>
</li>
<li><p>é¦–å…ˆæ˜¯ä¸‹è½½</p>
<p>  ç”±äºGWF( Great FireWall é˜²ç«é•¿åŸ,ä¹Ÿç§°ä¸­å›½é˜²ç«å¢™ ),å¯¼è‡´å»go get golang.org/x/tools/cmd/present ä¸‹è½½ä¸ä¸‹æ¥,è¿™é‡Œæ¨è <a href="http://www.golangtc.com/download/package">golangtc</a>,ä¸‹è½½ä¸‹æ¥ä¹‹å,æ”¾åˆ°ä½ è‡ªå·±çš„gopathä¸‹</p>
</li>
<li><p>å®‰è£… present</p>
<p>  go install go/src/golang.org/x/tools/cmd/present/ ä¹‹åä¼šåœ¨gopathçš„binç›®å½•ä¸‹å¤šå‡ºæ¥ä¸€ä¸ª present,</p>
</li>
<li><p>æœ¬åœ°æŸ¥çœ‹</p>
<p>  æœ‰äº†presentå°±å¯ä»¥æŸ¥çœ‹.slideæ–‡ä»¶äº†. ç›´æ¥åœ¨æœ‰.slideæ–‡ä»¶çš„ç›®å½•ä¸‹,è¾“å…¥present,ç„¶åè®¿é—® <a href="http://127.0.0.1:3999/">http://127.0.0.1:3999/</a> å°±å¯ä»¥çœ‹åˆ°å•¦.</p>
</li>
<li><p>ç¼–å†™.slideæ–‡ä»¶</p>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ç¦æ­¢iosçš„æµè§ˆå™¨å°†è¿ç»­æ•°å­—è¯†åˆ«ä¸ºå·ç ]]></title>
    <link href="http://sugeladi.github.io/2016/05/06/%E7%A6%81%E6%AD%A2ios%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%86%E8%BF%9E%E7%BB%AD%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB%E4%B8%BA%E5%8F%B7%E7%A0%81/"/>
    <id>http://sugeladi.github.io/2016/05/06/ç¦æ­¢iosçš„æµè§ˆå™¨å°†è¿ç»­æ•°å­—è¯†åˆ«ä¸ºå·ç /</id>
    <published>2016-05-06T08:56:05.000Z</published>
    <updated>2016-05-06T09:14:25.000Z</updated>
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ç”¨goçš„templatesåšç½‘é¡µçš„æ—¶å€™,å‘ç°è¢«iosçš„å†…ç½®æµè§ˆç”¨webviewåŠ è½½ ä¼šæŠŠè¿ç»­çš„æ•°å­—è§£ææˆä¸€ä¸ªå¯æ‹¨æ‰“çš„æ‰‹æœºå·,å¹¶å¸¦ä¸Šé“¾æ¥æ˜¾ç¤ºè“è‰²çš„å­—ä½“,åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹å‘ä¸‹Safariçš„å®˜ç½‘ä¸Šè¯´æœ‰ä¸ª meta çš„å±æ€§å¦‚ä¸‹<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"format-detection"</span> <span class="attribute">content</span>=<span class="value">"telephone=no"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è®°å½•ä¸€ä¸‹~</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>ä»Šå¤©åœ¨ç”¨goçš„templatesåšç½‘é¡µçš„æ—¶å€™,å‘ç°è¢«iosçš„å†…ç½®æµè§ˆç”¨webviewåŠ è½½ ä¼šæŠŠè¿ç»­çš„æ•°å­—è§£ææˆä¸€ä¸ªå¯æ‹¨æ‰“çš„æ‰‹æœºå·,å¹¶å¸¦ä¸Šé“¾æ¥æ˜¾ç¤ºè“è‰²çš„å­—ä½“,åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹å‘ä¸‹Safariçš„å®˜ç½‘ä¸Šè¯´æœ‰ä¸ª meta çš„å±æ€§å¦‚ä¸‹<br><figure class="highli]]>
    </summary>
    
      <category term="golang,templates,ios safari" scheme="http://sugeladi.github.io/tags/golang-templates-ios-safari/"/>
    
      <category term="html" scheme="http://sugeladi.github.io/categories/html/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ELK å­¦ä¹ ç¬”è®°(ä»é›¶å¼€å§‹)]]></title>
    <link href="http://sugeladi.github.io/2016/04/22/ELK-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    <id>http://sugeladi.github.io/2016/04/22/ELK-å­¦ä¹ ç¬”è®°-ä»é›¶å¼€å§‹/</id>
    <published>2016-04-22T09:56:08.000Z</published>
    <updated>2016-04-27T06:24:22.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>ä¸€å¥è¯ä»‹ç»<ul>
<li>Logstashæ˜¯ä¸€ä¸ªæ¥æ”¶ï¼Œå¤„ç†ï¼Œè½¬å‘æ—¥å¿—çš„å·¥å…·</li>
<li>elasticsearchæ˜¯åŸºäºluceneçš„å¼€æºæœç´¢å¼•æ“(å®æ—¶çš„å…¨æ–‡ç´¢å¼•),ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“</li>
<li>kibana æ˜¯æ ¹æ®elastic search æ•°æ®å¯è§†åŒ–ï¼Œä¸°å¯ŒåŠŸèƒ½ï¼Œæ”¯æŒç‚¹é€‰</li>
</ul>
</li>
<li><p>ç‰ˆæœ¬å·</p>
<ul>
<li>elasticsearch ç‰ˆæœ¬ 2.3.1</li>
<li>logstash ç‰ˆæœ¬ 2.3.1</li>
<li>kibana ç‰ˆæœ¬ 4.5.0</li>
</ul>
</li>
<li>æ–‡æ¡£èµ„æ–™<ul>
<li>å®˜ç½‘ <a href="https://www.elastic.co" target="_blank" rel="external">https://www.elastic.co</a><br><img src="http://7xk2rp.com1.z0.glb.clouddn.com/Snip20160422_1.png" alt=""><a id="more"></a></li>
<li>Logstash æœ€ä½³å®è·µ <a href="http://udn.yyuap.com/doc/logstash-best-practice-cn/index.html" target="_blank" rel="external">http://udn.yyuap.com/doc/logstash-best-practice-cn/index.html</a></li>
<li>Elasticsearch æƒå¨æŒ‡å—  <a href="http://www.learnes.net/index.html" target="_blank" rel="external">http://www.learnes.net/index.html</a></li>
<li>ELKstack ä¸­æ–‡æŒ‡å— <a href="http://kibana.logstash.es/content/" target="_blank" rel="external">http://kibana.logstash.es/content/</a></li>
</ul>
</li>
<li>å…ˆç”¨apt-getå®‰è£…jdk logstashéœ€è¦<ul>
<li>sudo apt-get update</li>
<li>sudo apt-get install openjdk-7-jdk</li>
<li>è®¾ç½®javaç¯å¢ƒå˜é‡ sudo vi .bashrc æ·»åŠ ä»¥ä¸‹<ul>
<li>export JAVA_HOME=/usr/local/java/jdk1.8.0_45</li>
<li>export PATH=$PATH:$JAVA_HOME/bin</li>
<li>exportCLASSPATH=.:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jar:$CLASSPATH</li>
<li>source .bashrc</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¸‹è½½elasticsearch ç‰ˆæœ¬ 2.3.1</p>
<ul>
<li>wget <a href="https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.1/elasticsearch-2.3.1.tar.gz" target="_blank" rel="external">https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.3.1/elasticsearch-2.3.1.tar.gz</a></li>
<li>è§£å‹ tar zxf elasticsearch-2.3.1.tar.gz -C /usr/local</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ /config/elasticsearch.yml  Networkä¸‹ network.host 192.168.0.240 ï¼ˆæµ‹è¯•æœåŠ¡å™¨ä¸º 0.0.0.0ï¼‰ ä¹Ÿå¯ä»¥ä¸è®¾ç½®ï¼Œè®¾ç½®çš„åŸå› æ˜¯æƒ³åœ¨å¤–ç½‘é€šè¿‡esçš„æ’ä»¶æŸ¥çœ‹ä¸€äº›ä¿¡æ¯</li>
<li>bin/elasticsearch -Des.insecure.allow.root=true (è§£å†³rootä¸èƒ½å¯åŠ¨)</li>
<li>å¯åŠ¨ elasticsearch è¿›å…¥ elastic search ç›®å½• ./bin/elasticsearch -d ï¼ˆ-d å‚æ•° åœ¨åå°è¿è¡Œï¼‰</li>
<li>å¯ä»¥ç”¨ curl â€˜<a href="http://localhost:9200/_search?pretty" target="_blank" rel="external">http://localhost:9200/_search?pretty</a>â€˜ æ¥æŸ¥çœ‹</li>
</ul>
</li>
<li><p>ä¸‹è½½logstash ç‰ˆæœ¬ 2.3.1</p>
<ul>
<li>wget <a href="https://download.elastic.co/logstash/logstash/logstash-2.3.1.tar.gz" target="_blank" rel="external">https://download.elastic.co/logstash/logstash/logstash-2.3.1.tar.gz</a></li>
<li>è§£å‹ tar zxf logstash-2.3.1.tar.gz -C /usr/local</li>
<li>æ‰§è¡Œ /usr/local/logstash-2.3.1/bin/logstash -e â€˜input { stdin { } } output { stdout {} }â€™  è¿™æ˜¯ä½ è¾“å…¥ä»€ä¹ˆï¼Œæ§åˆ¶å°å°±ä¼šæœ‰æ ¼å¼çš„æ˜¾ç¤ºä»€ä¹ˆ</li>
<li>ä½¿ç”¨agent -f , ç¼–å†™æ–‡ä»¶ logstash-simple.conf  å†…å®¹ä¸º input { stdin { } } output { stdout {} }</li>
<li>/usr/local/logstash-2.3.1/bin/logstash agent -f logstash-simple.conf</li>
<li>nohup ./bin/logstash -f logstash-nginx-file.conf &amp; åœ¨åå°å¯åŠ¨</li>
</ul>
</li>
<li>ä¸‹è½½kibana ç‰ˆæœ¬ 4.5.0<ul>
<li>wget <a href="https://download.elastic.co/kibana/kibana/kibana-4.5.0-linux-x64.tar.gz" target="_blank" rel="external">https://download.elastic.co/kibana/kibana/kibana-4.5.0-linux-x64.tar.gz</a></li>
<li>è§£å‹ tar zxf kibana-4.5.0-linux-x64.tar.gz -C /usr/local</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ /config/kibana.yml æŒ‡å®š elasticsearch.url</li>
<li>å¯åŠ¨ è¿›å…¥ kibana-4.5.0-linux-x64.tar.gzç›®å½• ./bin/kibana åœ¨åå°è¿è¡Œ  ç”¨ honup ./bin/kibana &amp;</li>
<li>kibanaæ˜¯nodejså¼€å‘çš„ï¼Œæœ¬èº«å¹¶æ²¡æœ‰ä»»ä½•å®‰å…¨é™åˆ¶ï¼Œç›´æ¥æµè§ˆurlå°±èƒ½è®¿é—®ï¼Œå¦‚æœå…¬ç½‘ç¯å¢ƒéå¸¸ä¸å®‰å…¨ï¼Œå¯ä»¥é€šè¿‡nginxè¯·æ±‚è½¬å‘å¢åŠ è®¤è¯</li>
<li>kibanaæ²¡æœ‰é‡å¯å‘½ä»¤ï¼Œè¦é‡å¯ï¼Œåªèƒ½ps -ef|grep node æŸ¥æ‰¾nodejsè¿›ç¨‹ï¼Œå¹²æ‰é‡æ¥ã€‚</li>
<li>æ·»åŠ authè®¤è¯<ul>
<li>é…ç½®nginxé…ç½®æ–‡ä»¶ vi /etc/nginx/sites-available/default æ·»åŠ  auth_basic auth_basic_user_file<ul>
<li>upstream kibana {</li>
<li>server 127.0.0.1:5601;</li>
<li>}</li>
<li>server{</li>
<li>listen    80;</li>
<li>server_name kibanabeta.occall.com;</li>
<li>auth_basic â€œRestricted Accessâ€;</li>
<li>auth_basic_user_file /etc/nginx/htpasswd.users;</li>
<li>location / {</li>
<li>proxy_pass_header Server;</li>
<li>proxy_set_header Host $http_host;</li>
<li>proxy_redirect off;</li>
<li>proxy_set_header X-Real-IP $remote_addr;</li>
<li>proxy_set_header X-Scheme $scheme;</li>
<li>proxy_pass <a href="http://kibana" target="_blank" rel="external">http://kibana</a>;</li>
<li>}</li>
<li>}</li>
</ul>
</li>
<li>ä½¿ç”¨apt-get install apache2-utils</li>
<li>htpasswd -c /etc/nginx/htpasswd.users kadmin è¾“å…¥åï¼Œä¼šè®©ä½ è¾“å…¥å¯†ç </li>
<li>é‡å¯nginx service nginx restart   </li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p> å®‰è£…ç»“æŸï¼Œå¼€å§‹é…ç½®ï¼</p>
<ul>
<li><p>ç»“åˆ logstash å’Œ elasticsearch   ç›‘æ§æ–‡ä»¶</p>
<ul>
<li>å…ˆå¯åŠ¨elasticsearch</li>
<li>ç¼–å†™logstashæ–‡ä»¶logstash-es-simple.conf   input { stdin { } } output { elasticsearch {hosts=&gt; â€œlocalhostâ€} stdout {} }</li>
<li>å¯åŠ¨logstash /usr/local/logstash-2.3.1/bin/logstash agent -f logstash-es-simple.conf</li>
<li>è¿™æ˜¯ä½ åœ¨æ§åˆ¶å°è¾“å…¥çš„ä¸œè¥¿ ä¼š æœ‰è§„åˆ™çš„æ˜¾ç¤ºåœ¨æ§åˆ¶å° åŒæ—¶ä¼šå†™å…¥åˆ° elasticsearchä¸­</li>
<li>æŸ¥çœ‹elasticsearchï¼Œ curl â€˜<a href="http://localhost:9200/_search?pretty" target="_blank" rel="external">http://localhost:9200/_search?pretty</a>â€˜ ä¼šå‘ç°åˆšå†™å…¥çš„å†…å®¹ä¼šåœ¨responseä¸­</li>
<li>logstash è·Ÿè¸ªæ–‡ä»¶ mvoiceçš„æ—¥å¿— input { file { path =&gt; â€œ/path/to/logstash-tutorial.logâ€  start_position =&gt; beginning   ignore_older =&gt; 0 }}</li>
<li>è·Ÿè¸ªmvoiceçš„æ—¥å¿—æ–‡ä»¶ input {  file { path =&gt; â€œ/home/gin/nohup.outâ€ start_position =&gt; beginning ignore_older =&gt;0 } } output { elasticsearch {hosts=&gt; â€œlocalhostâ€} stdout { codec=&gt; rubydebug} }</li>
<li>start_position ä»…åœ¨è¯¥æ–‡ä»¶ä»æœªè¢«ç›‘å¬è¿‡çš„æ—¶å€™èµ·ä½œç”¨ã€‚å¦‚æœ sincedb æ–‡ä»¶ä¸­å·²ç»æœ‰è¿™ä¸ªæ–‡ä»¶çš„ inode è®°å½•äº†ï¼Œé‚£ä¹ˆ logstash ä¾ç„¶ä¼šä»è®°å½•è¿‡çš„ pos å¼€å§‹è¯»å–æ•°æ®ã€‚æ‰€ä»¥é‡å¤æµ‹è¯•çš„æ—¶å€™æ¯å›éœ€è¦åˆ é™¤ sincedb æ–‡ä»¶(å®˜æ–¹åšå®¢ä¸Šæä¾›äº†å¦ä¸€ä¸ªå·§å¦™çš„æ€è·¯ï¼šå°† sincedb_path å®šä¹‰ä¸º /dev/nullï¼Œåˆ™æ¯æ¬¡é‡å¯è‡ªåŠ¨ä»å¤´å¼€å§‹è¯»)ã€‚</li>
<li><p>logstash è¯»å–nginxçš„access.log éœ€è¦nginxçš„æ—¥å¿—æ–‡ä»¶ ç›¸åŒ¹é… (è¿™é‡Œçš„dateè§£æçš„æ—¶å€™ï¼Œé‡åˆ°ä¸€ä¸ªå‘ï¼ˆä½çº§é”™è¯¯ï¼‰ï¼ŒHHæˆ‘å†™æˆäº†hhï¼Œæ‰€ä»¥ä¼šä¸€ç›´æŠ¥ä¸€ä¸ªè­¦å‘Š {:timestamp=&gt;â€2016-04-22T16:54:57.527000+0800â€, :message=&gt;â€Failed parsing date from fieldâ€, :field=&gt;â€time_localâ€, :value=&gt;â€22/Apr/2016:16:54:56 +0800â€, :exception=&gt;â€Cannot parse \â€22/Apr/2016:16:54:56 +0800\â€: Value 16 for clockhourOfHalfday must be in the range [1,12]â€, :config_parsers=&gt;â€dd/MMM/yyyy:hh:mm:ss Zâ€, :config_locale=&gt;â€enâ€, :level=&gt;:warn})       ç›´æ¥çœ‹åˆ°ä¿¡æ¯ 16 for clockhourOfHalfday must be in the range [1,12]</p>
   <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter&#123;&#10;        ruby &#123;&#10;        init =&#62; &#34;@kname = [&#39;remote_addr&#39;,&#39;remote_user&#39;,&#39;time_local&#39;,&#39;request&#39;,&#39;status&#39;,&#39;body_bytes_sent&#39;,&#39;request_time&#39;,&#39;upstream_response_time&#39;,&#39;http_referer&#39;,&#39;http_user_agent&#39;,&#39;http_x_forwarded_for&#39;]&#34;&#10;        code =&#62; &#34;event.append(Hash[@kname.zip(event[&#39;message&#39;].split(&#39; | &#39;))])&#34;&#10;    &#125;&#10;    if [request] &#123;&#10;        ruby &#123;&#10;            init =&#62; &#34;@kname = [&#39;method&#39;,&#39;uri&#39;,&#39;verb&#39;]&#34;&#10;            code =&#62; &#34;event.append(Hash[@kname.zip(event[&#39;request&#39;].split(&#39; &#39;))])&#34;&#10;        &#125;&#10;     &#125;&#10;     mutate &#123;&#10;        convert =&#62; [&#10;            &#34;body_bytes_sent&#34; , &#34;integer&#34;,&#10;            &#34;upstream_response_time&#34;, &#34;float&#34;,&#10;            &#34;request_time&#34;, &#34;float&#34;&#10;        ]&#10;    &#125;&#10;    date &#123;&#10;        match =&#62; [ &#34;time_local&#34;, &#34;dd/MMM/yyyy:HH:mm:ss Z&#34; ]&#10;        locale =&#62; &#34;en&#34;&#10;    &#125;&#10;    geoip &#123;&#10;           source =&#62; &#34;remote_addr&#34;&#10;     &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>grok <a href="http://grokdebug.herokuapp.com" target="_blank" rel="external">http://grokdebug.herokuapp.com</a>  åœ¨çº¿è°ƒè¯•ç½‘å€</p>
</li>
<li>gsup ï¼šæ›¿æ¢ æ”¯æŒæ­£åˆ™ï¼Œä¸ºäº†ä¿è¯uriä¸ºç»Ÿä¸€ï¼Œå³ å¯ç»Ÿè®¡æ•°æ®ï¼Œå°†bsonId å’Œ uId å»é™¤ï¼Œéœ€è¦åœ¨gsupä¸­æ·»åŠ å“åº”çš„æ­£åˆ™ã€‚  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mutate &#123;&#10;        convert =&#62; [&#10;            &#34;body_bytes_sent&#34; , &#34;integer&#34;,&#10;            &#34;upstream_response_time&#34;, &#34;float&#34;,&#10;            &#34;request_time&#34;, &#34;float&#34;&#10;        ]&#10;        gsub =&#62; [&#34;uri&#34;,&#34;[0-9a-z]&#123;24&#125;&#8221;,&#34;bsonid&#34;]&#10;        gsub =&#62; [&#34;uri&#34;,&#34;\d&#123;6,&#125;&#8221;,&#34;uid&#34;]&#10;        gsub =&#62; [&#34;uri&#34;,&#34;\d+x\d+&#34;,&#34;wh&#34;]&#10;        gsub =&#62; [&#34;uri&#34;,&#34;\?.+&#34;,&#34;&#34;]&#10;    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>logstash åˆ›å»ºå¤šä¸ªconf å¹¶ä¿å­˜åˆ°å¤šä¸ªç±»å‹index</p>
<ul>
<li>logstash è¿˜æä¾›ä¸€ä¸ªæ–¹ä¾¿æˆ‘ä»¬è§„åˆ’å’Œä¹¦å†™é…ç½®çš„å°åŠŸèƒ½ã€‚ä½ å¯ä»¥ç›´æ¥ç”¨ bin/logstash -f /etc/logstash.d/ æ¥è¿è¡Œã€‚logstash ä¼šè‡ªåŠ¨è¯»å– /etc/logstash.d/ ç›®å½•ä¸‹æ‰€æœ‰ *.conf çš„æ–‡æœ¬æ–‡ä»¶ï¼Œç„¶ååœ¨è‡ªå·±å†…å­˜é‡Œæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„å¤§é…ç½®æ–‡ä»¶ï¼Œå†å»æ‰§è¡Œã€‚</li>
<li>Logstash åœ¨æœ‰å¤šä¸ª conf æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¿›å…¥ ES çš„æ•°æ®ä¼šé‡å¤ï¼Œå‡ ä¸ª conf æ•°æ®å°±ä¼šé‡å¤å‡ æ¬¡ã€‚å…¶å®é—®é¢˜åŸå› åœ¨ä¹‹å‰å¯åŠ¨å‚æ•°ç« èŠ‚æœ‰æè¿‡ï¼Œoutput æ®µé¡ºåºæ‰§è¡Œï¼Œæ²¡æœ‰å¯¹æ—¥å¿— type è¿›è¡Œåˆ¤æ–­çš„å„æ’ä»¶é…ç½®éƒ½ä¼šå…¨éƒ¨æ‰§è¡Œä¸€æ¬¡ã€‚åœ¨ output æ®µå¯¹ type è¿›è¡Œåˆ¤æ–­çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤º:  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> output &#123;&#10;    if [type] == &#34;nginxaccess&#34; &#123;&#10;      elasticsearch &#123; &#125;&#10;    &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>å®‰è£…elasticsearch æ’ä»¶ Elasticsearch-kopf æ’ä»¶å¯ä»¥æŸ¥è¯¢ Elasticsearch ä¸­çš„æ•°æ®</p>
<ul>
<li>åœ¨elasticsearchç›®å½•ä¸‹ ./bin/plugin install lmenezes/elasticsearch-kopf</li>
<li>å®‰è£…å®Œæˆååœ¨ plugins ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ° kopf</li>
<li>è®¿é—® <a href="http://localhost:9200/_plugin/kopf" target="_blank" rel="external">http://localhost:9200/_plugin/kopf</a> éœ€è¦å¼€å¯ç«¯å£å·</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ /config/elasticsearch.yml å…¶ä¸­ network.host å¯åŠ¨çš„IP(å‚è€ƒ 4.3)</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ /config/elasticsearch.yml å¼€å¯script è„šæœ¬(è¿™æ ·å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨ update += äº† ) å³ 8.11</li>
</ul>
</li>
<li><p>elastic é€šè¿‡ HTTP å‘ RESTful API ä¼ é€ json</p>
<ul>
<li>ç›¸åº”çš„ HTTP è¯·æ±‚æ–¹æ³• æˆ–è€… å˜é‡ : GET, POST, PUT, HEAD æˆ–è€… DELETE</li>
<li>åˆ›å»ºä¸€ä¸ªindex  curl -XPUT â€˜localhost:9200/customer?prettyâ€™</li>
<li>æŸ¥çœ‹æ‰€æœ‰index  curl â€˜localhost:9200/_cat/indices?vâ€™</li>
<li>å‘typeä¸­æ’å…¥ä¸€æ¡æ•°æ® curl -XPUT elk.occall:9200/hxindex/user/2 -d â€˜{â€œnameâ€:â€hx02â€,â€ageâ€:26}â€™</li>
<li>å‘typeä¸­æ’å…¥ä¸€æ¡æ•°æ® ä¸æŒ‡å®šid  curl -XPOST elk.occall:9200/hxindex/user -d â€˜{â€œnameâ€:â€hx03â€,â€ageâ€:26}â€™</li>
<li>æŸ¥è¯¢æ•°æ® curl -XGET elk.occall:9200/hxindex/user/1?pretty</li>
<li>åˆ é™¤æ–‡æ¡£ä¸€æ¡æ•°æ® curl -XDELETE elk.occall:9200/hxindex/user/1?pretty</li>
<li>ä¿®æ”¹æ•°æ® åŒæ’å…¥ï¼Œå¦‚æœæœ‰å°±æ˜¯ä¿®æ”¹ï¼Œæ²¡æœ‰å°±æ˜¯æ’å…¥</li>
<li>ä¿®æ”¹æŸä¸ªå­—æ®µ curl -XPOST elk.occall:9200/hxindex/user/2/_update?pretty -d â€˜{â€œdocâ€:{â€œnameâ€:â€hxx02â€}}â€™</li>
<li>æ·»åŠ ä¸€ä¸ªå­—æ®µ curl -XPOST elk.occall:9200/hxindex/user/2/_update?pretty -d â€˜{â€œdocâ€:{â€œnameâ€:â€hxx02â€,â€addressâ€:â€BJâ€}}â€™</li>
<li>ä½¿ç”¨è„šæœ¬ curl -XPOST elk.occall:9200/hxindex/user/2/_update?pretty -d â€˜{â€œscriptâ€:{â€œageâ€:â€cx._source.age+=5â€}}â€™</li>
</ul>
</li>
<li><p>é¢å¤–çš„è¯</p>
<ul>
<li><p>LogStash çš„æ€§èƒ½ï¼Œæ˜¯æœ€è®©æ–°äººè¿·æƒ‘çš„åœ°æ–¹ã€‚å› ä¸º LogStash æœ¬èº«å¹¶ä¸ç»´æŠ¤é˜Ÿåˆ—ï¼Œæ‰€ä»¥æ•´ä¸ªæ—¥å¿—æµè½¬ä¸­ä»»æ„ç¯èŠ‚çš„é—®é¢˜ï¼Œéƒ½å¯èƒ½çœ‹èµ·æ¥åƒæ˜¯ LogStash çš„é—®é¢˜ã€‚è¿™é‡Œï¼Œéœ€è¦ç†Ÿç»ƒä½¿ç”¨æœ¬èŠ‚è¯´çš„æµ‹è¯•æ–¹æ³•ï¼Œé’ˆå¯¹è‡ªå·±çš„æ¯ä¸€æ®µé…ç½®ï¼Œéƒ½ç¡®å®šå…¶æ€§èƒ½ã€‚å¦ä¸€æ–¹é¢ï¼Œå°±æ˜¯æœ¬ä¹¦ä¹‹å‰æåˆ°è¿‡çš„ï¼ŒLogStash ç»™è‡ªå·±çš„çº¿ç¨‹éƒ½è®¾ç½®äº†å•ç‹¬çš„çº¿ç¨‹åç§°ï¼Œä½ å¯ä»¥åœ¨ top -H ç»“æœä¸­æŸ¥çœ‹å…·ä½“çº¿ç¨‹çš„è´Ÿè½½æƒ…å†µã€‚</p>
</li>
<li><p>Elasticsearch çš„æ€§èƒ½ã€‚è¿™é‡Œæœ€éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šElasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ä»æ¥æ²¡æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿè¦è·Ÿäººæ¯”è¾ƒå•æœºå¤„ç†èƒ½åŠ›çš„è¯´æ³•ã€‚æ‰€ä»¥ï¼Œæ›´éœ€è¦å…³æ³¨çš„æ˜¯ï¼šåœ¨ç¡®å®šçš„å•æœºå¤„ç†èƒ½åŠ›çš„å‰æä¸‹ï¼Œæ€§èƒ½æ˜¯å¦èƒ½åšåˆ°çº¿æ€§æ‰©å±•ã€‚å½“ç„¶ï¼Œè¿™ä¸æ„å‘³ç€è¯´æé«˜å¤„ç†èƒ½åŠ›åªèƒ½é åŠ æœºå™¨äº†â€”â€”æœ‰æ•ˆåˆ©ç”¨ mapping API æ˜¯éå¸¸é‡è¦çš„ã€‚ä¸è¿‡æš‚æ—¶å°±åœ¨è¿™é‡Œè®²è¿°äº†ã€‚</p>
</li>
<li><p>Kibana çš„æ€§èƒ½ã€‚é€šå¸¸æ¥è¯´ï¼ŒKibana åªæ˜¯ä¸€ä¸ªå•é¡µ Web åº”ç”¨ï¼Œåªéœ€è¦ nginx å‘å¸ƒé™æ€æ–‡ä»¶å³å¯ï¼Œæ²¡ä»€ä¹ˆæ€§èƒ½é—®é¢˜ã€‚é¡µé¢åŠ è½½ç¼“æ…¢ï¼ŒåŸºæœ¬ä¸Šæ˜¯å› ä¸º Elasticsearch çš„è¯·æ±‚å“åº”æ—¶é—´æœ¬èº«ä¸å¤Ÿå¿«å¯¼è‡´çš„ã€‚ä¸è¿‡ä¸€å®šè¦ç»†ç©¶çš„è¯ï¼Œä¹Ÿèƒ½æ‰¾å‡ºç‚¹ Kibana æœ¬èº«æ€§èƒ½ç›¸å…³çš„è¯é¢˜ï¼šå› ä¸º Kibana3 é»˜è®¤æ˜¯è¿æ¥å›ºå®šçš„ä¸€ä¸ª ES èŠ‚ç‚¹çš„ IP ç«¯å£çš„ï¼Œæ‰€ä»¥è¿™é‡Œä¼šæ¶‰åŠä¸€ä¸ªæµè§ˆå™¨çš„åŒä¸€ IP å¹¶å‘è¿æ¥æ•°çš„é™åˆ¶ã€‚å…¶æ¬¡ï¼Œå°±æ˜¯ Kibana ç”¨çš„ AngularJS ä½¿ç”¨äº† Promise.then çš„æ–¹å¼æ¥å¤„ç† HTTP è¯·æ±‚å“åº”ã€‚è¿™æ˜¯å¼‚æ­¥çš„ã€‚</p>
</li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li>ä¸€å¥è¯ä»‹ç»<ul>
<li>Logstashæ˜¯ä¸€ä¸ªæ¥æ”¶ï¼Œå¤„ç†ï¼Œè½¬å‘æ—¥å¿—çš„å·¥å…·</li>
<li>elasticsearchæ˜¯åŸºäºluceneçš„å¼€æºæœç´¢å¼•æ“(å®æ—¶çš„å…¨æ–‡ç´¢å¼•),ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“</li>
<li>kibana æ˜¯æ ¹æ®elastic search æ•°æ®å¯è§†åŒ–ï¼Œä¸°å¯ŒåŠŸèƒ½ï¼Œæ”¯æŒç‚¹é€‰</li>
</ul>
</li>
<li><p>ç‰ˆæœ¬å·</p>
<ul>
<li>elasticsearch ç‰ˆæœ¬ 2.3.1</li>
<li>logstash ç‰ˆæœ¬ 2.3.1</li>
<li>kibana ç‰ˆæœ¬ 4.5.0</li>
</ul>
</li>
<li>æ–‡æ¡£èµ„æ–™<ul>
<li>å®˜ç½‘ <a href="https://www.elastic.co">https://www.elastic.co</a><br><img src="http://7xk2rp.com1.z0.glb.clouddn.com/Snip20160422_1.png" alt="">]]>
    
    </summary>
    
      <category term="ELK" scheme="http://sugeladi.github.io/tags/ELK/"/>
    
      <category term="ELK" scheme="http://sugeladi.github.io/categories/ELK/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golang slice copyä¸€ä¸ªå°å‘]]></title>
    <link href="http://sugeladi.github.io/2016/04/06/golang-slice-copy%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%9D%91/"/>
    <id>http://sugeladi.github.io/2016/04/06/golang-slice-copyä¸€ä¸ªå°å‘/</id>
    <published>2016-04-06T08:41:33.000Z</published>
    <updated>2016-04-06T08:54:09.000Z</updated>
    <content type="html"><![CDATA[<p>ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªsliceåœ¨copyä¸­çš„å‘,åœ¨å¤åˆ¶æ—¶ä¸€å®šè¦æ³¨æ„,ç›®æ ‡sliceçš„lenæ˜¯å¤§äºæºsliceçš„len.(ä¸æ˜¯cap)<br>ç›´æ¥ä¸Šä»£ç :<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">	srcSlice := []<span class="typename">string</span>&#123;<span class="string">"hello"</span>,<span class="string">"world"</span>&#125;</span><br><span class="line">	copy1 := []<span class="typename">string</span>&#123;&#125;</span><br><span class="line">	copy2 := <span class="built_in">make</span>([]<span class="typename">string</span>, <span class="built_in">len</span>(srcSlice))</span><br><span class="line">	<span class="built_in">copy</span>(copy1, srcSlice)</span><br><span class="line">	<span class="built_in">copy</span>(copy2, srcSlice)</span><br><span class="line">	fmt.Printf(<span class="string">"srcSlice:%v \n"</span>,srcSlice)</span><br><span class="line">	fmt.Printf(<span class="string">"copy1:%v \n"</span>,copy1)</span><br><span class="line">	fmt.Printf(<span class="string">"copy2:%v \n"</span>,copy2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console:&#10;    srcSlice:[hello world] &#10;    copy1:[] &#10;    copy2:[hello world]</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>ä»Šå¤©é‡åˆ°äº†ä¸€ä¸ªsliceåœ¨copyä¸­çš„å‘,åœ¨å¤åˆ¶æ—¶ä¸€å®šè¦æ³¨æ„,ç›®æ ‡sliceçš„lenæ˜¯å¤§äºæºsliceçš„len.(ä¸æ˜¯cap)<br>ç›´æ¥ä¸Šä»£ç :<br><figure class="highlight go"><table><tr><td class="gutter"><]]>
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golang gctrace]]></title>
    <link href="http://sugeladi.github.io/2016/03/07/golang-gctrace/"/>
    <id>http://sugeladi.github.io/2016/03/07/golang-gctrace/</id>
    <published>2016-03-07T08:03:29.000Z</published>
    <updated>2016-03-07T09:56:41.000Z</updated>
    <content type="html"><![CDATA[<p>golangçš„GCTRACE(åƒåœ¾æ”¶é›†å™¨è¿½è¸ª) æ“ä½œæ­¥éª¤:</p>
<h3 id="1-å…ˆå†™ç‚¹goä»£ç ,åšç‚¹å†…å­˜æ“ä½œ">1.å…ˆå†™ç‚¹goä»£ç ,åšç‚¹å†…å­˜æ“ä½œ</h3><p>test1.go :<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"log"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HXTest <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id        <span class="typename">int</span></span><br><span class="line">	Name <span class="typename">string</span></span><br><span class="line">	Email <span class="typename">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">	<span class="keyword">const</span> SIZE = <span class="number">1000000</span> <span class="comment">// 100ä¸‡</span></span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="typename">int32</span>]HXTest, SIZE)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; SIZE; i++ &#123; <span class="comment">// æŠŠæ•°æ®æ”¾è¿›å†…å­˜</span></span><br><span class="line">		m[rand.Int31()] = HXTest&#123;</span><br><span class="line">			Id:i,</span><br><span class="line">			Name:fmt.Sprintf(<span class="string">"hx%d"</span>,i),</span><br><span class="line">			Email:fmt.Sprintf(<span class="string">"hx%d@gmail.com"</span>,i),</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	http.HandleFunc(<span class="string">"/"</span>, <span class="keyword">func</span>(w http.ResponseWriter, r *http.Request) &#123;</span><br><span class="line">		<span class="comment">// æ¨¡æ‹Ÿå†…å­˜åˆ†é…ï¼Œåšä¸€äº›è®¡ç®—</span></span><br><span class="line">		num := rand.Intn(<span class="number">10000</span>)</span><br><span class="line">		sum := <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; num; i++ &#123;</span><br><span class="line">			sum = sum + i</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Fprintf(w, <span class="string">"num:%d,sum: %d"</span>,num, sum)</span><br><span class="line">	&#125;)</span><br><span class="line">	log.Fatal(http.ListenAndServe(<span class="string">":8080"</span>, <span class="constant">nil</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-è¿è¡Œèµ·æ¥,go_build:macçš„Terminalä¸‹:">2.è¿è¡Œèµ·æ¥,go build:macçš„Terminalä¸‹:</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go build -o gcTest test1.go&#10;GODEBUG=&#34;gctrace=1&#34; ./gcTest 2&#62;log_file</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜:<br>å°†GOGCTRACEè®¾ç½®ä¸º1ï¼ŒGoç¨‹åºå°±ä¼šåœ¨æ¯æ¬¡GCçš„æ—¶å€™è¾“å‡ºGCçš„ç›¸å…³ä¿¡æ¯ã€‚<br>2&gt;log_file æ˜¯æŠŠé”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°log_fileçš„æ–‡ä»¶é‡Œ.</p>
<h3 id="3-ä½¿ç”¨wrkåšæµ‹è¯•:_-d_10ç§’">3.ä½¿ç”¨wrkåšæµ‹è¯•: -d 10ç§’</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrk http://localhost:8080/ -d 10s</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdeMacBook-Pro:goWeb lihexing$ wrk http://localhost:8080/ -d 10s &#10;Running 10s test @ http://localhost:8080/&#10;  2 threads and 10 connections&#10;  Thread Stats   Avg      Stdev     Max   +/- Stdev&#10;    Latency    10.59ms   39.21ms 302.23ms   92.77%&#10;    Req/Sec    29.45k     6.57k   36.60k    88.14%&#10;  574902 requests in 10.02s, 75.79MB read&#10;Requests/sec:  57371.48&#10;Transfer/sec:      7.56MB</span><br></pre></td></tr></table></figure></p>
<p>ç”¨tail -f log_file æŸ¥çœ‹æ–‡ä»¶å¦‚ä¸‹:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdeMacBook-Pro:gcTest lihexing$ tail -f log_file &#10;gc 1 @0.007s 11%: 0.10+83+0.092 ms clock, 0.30+83/0.46/83+0.27 ms cpu, 92-&#62;92-&#62;92 MB, 93 MB goal, 8 P&#10;gc 2 @0.109s 10%: 0.005+55+0.096 ms clock, 0.046+0.024/55/0.43+0.77 ms cpu, 93-&#62;93-&#62;93 MB, 184 MB goal, 8 P&#10;gc 3 @0.819s 1%: 0.008+189+0.058 ms clock, 0.069+0.011/1.2/190+0.46 ms cpu, 139-&#62;139-&#62;132 MB, 186 MB goal, 8 P&#10;gc 4 @7.581s 0%: 0.016+175+0.18 ms clock, 0.13+0.44/2.9/178+1.4 ms cpu, 231-&#62;231-&#62;139 MB, 265 MB goal, 8 P&#10;gc 5 @9.555s 0%: 0.021+172+0.10 ms clock, 0.12+0.42/2.1/175+0.60 ms cpu, 261-&#62;261-&#62;139 MB, 279 MB goal, 8 P&#10;gc 6 @11.755s 0%: 0.018+166+0.11 ms clock, 0.090+3.0/2.2/167+0.55 ms cpu, 270-&#62;270-&#62;139 MB, 279 MB goal, 8 P&#10;gc 7 @14.022s 0%: 0.016+160+0.11 ms clock, 0.10+3.4/1.7/160+0.66 ms cpu, 272-&#62;272-&#62;139 MB, 279 MB goal, 8 P&#10;GC forced&#10;gc 8 @136.019s 0%: 0.023+191+0.071 ms clock, 0.18+0/3.3/189+0.57 ms cpu, 258-&#62;258-&#62;139 MB, 279 MB goal, 8 P&#10;scvg0: inuse: 144, idle: 129, sys: 274, released: 0, consumed: 274 (MB)&#10;GC forced&#10;gc 9 @256.248s 0%: 0.018+225+0.17 ms clock, 0.14+0/4.1/223+1.4 ms cpu, 139-&#62;139-&#62;139 MB, 278 MB goal, 8 P&#10;scvg1: inuse: 144, idle: 129, sys: 274, released: 0, consumed: 274 (MB)&#10;GC forced&#10;gc 10 @376.484s 0%: 0.011+182+0.10 ms clock, 0.091+0/3.2/180+0.86 ms cpu, 139-&#62;139-&#62;139 MB, 278 MB goal, 8 P&#10;GC forced&#10;gc 11 @496.675s 0%: 0.012+194+0.097 ms clock, 0.10+0/3.6/191+0.77 ms cpu, 139-&#62;139-&#62;139 MB, 278 MB goal, 8 P&#10;scvg2: 129 MB released&#10;scvg2: inuse: 144, idle: 129, sys: 274, released: 129, consumed: 144 (MB)&#10;GC forced&#10;gc 12 @616.890s 0%: 0.020+200+0.096 ms clock, 0.16+0/3.7/198+0.77 ms cpu, 139-&#62;139-&#62;139 MB, 278 MB goal, 8 P&#10;scvg3: inuse: 144, idle: 129, sys: 274, released: 129, consumed: 144 (MB)&#10;GC forced&#10;gc 13 @737.102s 0%: 0.018+191+0.085 ms clock, 0.15+0/192/1.0+0.68 ms cpu, 139-&#62;139-&#62;139 MB, 278 MB goal, 8 P</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>golangçš„GCTRACE(åƒåœ¾æ”¶é›†å™¨è¿½è¸ª) æ“ä½œæ­¥éª¤:</p>
<h3 id="1-å…ˆå†™ç‚¹goä»£ç ,åšç‚¹å†…å­˜æ“ä½œ">1.å…ˆå†™ç‚¹goä»£ç ,åšç‚¹å†…å­˜æ“ä½œ</h3><p>test1.go :<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"log"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"net/http"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> HXTest <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id        <span class="typename">int</span></span><br><span class="line">	Name <span class="typename">string</span></span><br><span class="line">	Email <span class="typename">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Macä¸‹å®‰è£…Protobufå¹¶ç”Ÿæˆjava go iosæ–‡ä»¶]]></title>
    <link href="http://sugeladi.github.io/2016/02/29/Protobuf-%E7%94%9F%E6%88%90java-go-ios%E6%96%87%E4%BB%B6/"/>
    <id>http://sugeladi.github.io/2016/02/29/Protobuf-ç”Ÿæˆjava-go-iosæ–‡ä»¶/</id>
    <published>2016-02-29T08:54:41.000Z</published>
    <updated>2016-02-29T10:00:56.000Z</updated>
    <content type="html"><![CDATA[<p>1.å®‰è£…brew.æŸ¥çœ‹æœ¬åœ°æ˜¯å¦ brew -v,å¦‚æœæ²¡å®‰è£…,æ‰§è¡Œä»¥ä¸‹ä»£ç <br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></span><br></pre></td></tr></table></figure></p>
<p>2.å®‰è£…protobuf<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install automake&#10;brew install libtool&#10;brew install protobuf</span><br></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>3.åˆ¶ä½œjavaæ–‡ä»¶ æ‰§è¡Œ protoc -help å¯ä»¥çœ‹åˆ° java_out=OUT_DIR ç›´æ¥å°±æœ‰javaçš„,æ‰€ä»¥ç›´æ¥æ‰§è¡Œ<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc --java_out=/Users/lihexing/Desktop/protobuf/java you.proto</span><br></pre></td></tr></table></figure></p>
<p>4.åˆ¶ä½œgoæ–‡ä»¶,é‡ç‚¹æ˜¯æ’ä»¶ protoc-gen-go</p>
<pre><code><span class="number">1</span>. ä¸‹è½½æºç  <span class="keyword">go</span> <span class="built_in">get</span> github.<span class="keyword">com</span>/golang/protobuf/protoc-gen-<span class="keyword">go</span>
<span class="number">2</span>. è¿›å…¥ç›®å½• <span class="keyword">cd</span> github.<span class="keyword">com</span>/golang/protobuf/protoc-gen-<span class="keyword">go</span>
<span class="number">3</span>. ç¼–è¯‘æ’ä»¶ <span class="keyword">go</span> install
<span class="number">4</span>. ä½¿ç”¨æ’ä»¶ protoc --go_out=/Users/lihexing/Desktop/protobuf/<span class="keyword">go</span> you.proto
</code></pre><p>5.åˆ¶ä½œiosæ–‡ä»¶ é‡ç‚¹æ˜¯æ’ä»¶ protobuf-objc</p>
<pre><code><span class="number">1.</span> è®¾ç½®è½¯è¿æ¥ ln -s <span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>protobuf<span class="regexp">/2.6.1/</span>bin<span class="regexp">/protoc /</span>usr<span class="regexp">/local/</span>bin
<span class="number">2.</span> å…‹éš†æºç  git clone <span class="string">https:</span><span class="comment">//github.com/alexeyxo/protobuf-objc.git</span>
<span class="number">3.</span> è¿›å…¥ç›®å½• cd protobuf-objc
<span class="number">4.</span> ç¼–è¯‘æ’ä»¶ .<span class="regexp">/scripts/</span>build.sh
<span class="number">5.</span> ä½¿ç”¨æ’ä»¶ pprotoc --plugin=<span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>protoc-gen-objc kodec.proto --objc_out=<span class="regexp">/Users/</span>lihexing<span class="regexp">/Desktop/</span>protobuf<span class="regexp">/ios/</span>
</code></pre><p>è‡³æ­¤,åœ¨Macä¸‹å®‰è£…ä½¿ç”¨protobufå·²å®Œæˆ.  è‡³äºå¦‚ä½•å†™protobuf,è¿˜å¾—æ¥ç€å­¦ä¹ ~ ï£¿</p>
<p>æ‰§è¡Œprotoc -help:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: protoc [OPTION] PROTO_FILES&#10;Parse PROTO_FILES and generate output based on the options given:&#10;  -IPATH, --proto_path=PATH   Specify the directory in which to search for&#10;                              imports.  May be specified multiple times;&#10;                              directories will be searched in order.  If not&#10;                              given, the current working directory is used.&#10;  --version                   Show version info and exit.&#10;  -h, --help                  Show this text and exit.&#10;  --encode=MESSAGE_TYPE       Read a text-format message of the given type&#10;                              from standard input and write it in binary&#10;                              to standard output.  The message type must&#10;                              be defined in PROTO_FILES or their imports.&#10;  --decode=MESSAGE_TYPE       Read a binary message of the given type from&#10;                              standard input and write it in text format&#10;                              to standard output.  The message type must&#10;                              be defined in PROTO_FILES or their imports.&#10;  --decode_raw                Read an arbitrary protocol message from&#10;                              standard input and write the raw tag/value&#10;                              pairs in text format to standard output.  No&#10;                              PROTO_FILES should be given when using this&#10;                              flag.&#10;  -oFILE,                     Writes a FileDescriptorSet (a protocol buffer,&#10;    --descriptor_set_out=FILE defined in descriptor.proto) containing all of&#10;                              the input files to FILE.&#10;  --include_imports           When using --descriptor_set_out, also include&#10;                              all dependencies of the input files in the&#10;                              set, so that the set is self-contained.&#10;  --include_source_info       When using --descriptor_set_out, do not strip&#10;                              SourceCodeInfo from the FileDescriptorProto.&#10;                              This results in vastly larger descriptors that&#10;                              include information about the original&#10;                              location of each decl in the source file as&#10;                              well as surrounding comments.&#10;  --error_format=FORMAT       Set the format in which to print errors.&#10;                              FORMAT may be &#39;gcc&#39; (the default) or &#39;msvs&#39;&#10;                              (Microsoft Visual Studio format).&#10;  --print_free_field_numbers  Print the free field numbers of the messages&#10;                              defined in the given proto files. Groups share&#10;                              the same field number space with the parent &#10;                              message. Extension ranges are counted as &#10;                              occupied fields numbers.&#10;  --plugin=EXECUTABLE         Specifies a plugin executable to use.&#10;                              Normally, protoc searches the PATH for&#10;                              plugins, but you may specify additional&#10;                              executables not in the path using this flag.&#10;                              Additionally, EXECUTABLE may be of the form&#10;                              NAME=PATH, in which case the given plugin name&#10;                              is mapped to the given executable even if&#10;                              the executable&#39;s own name differs.&#10;  --cpp_out=OUT_DIR           Generate C++ header and source.&#10;  --java_out=OUT_DIR          Generate Java source file.&#10;  --python_out=OUT_DIR        Generate Python source file.</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>1.å®‰è£…brew.æŸ¥çœ‹æœ¬åœ°æ˜¯å¦ brew -v,å¦‚æœæ²¡å®‰è£…,æ‰§è¡Œä»¥ä¸‹ä»£ç <br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></span><br></pre></td></tr></table></figure></p>
<p>2.å®‰è£…protobuf<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install automake&#10;brew install libtool&#10;brew install protobuf</span><br></pre></td></tr></table></figure></p>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="ios" scheme="http://sugeladi.github.io/tags/ios/"/>
    
      <category term="java" scheme="http://sugeladi.github.io/tags/java/"/>
    
      <category term="protobuf" scheme="http://sugeladi.github.io/tags/protobuf/"/>
    
      <category term="protobuf" scheme="http://sugeladi.github.io/categories/protobuf/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golangå­—ç¬¦ä¸²æˆªå–çš„ä¸¤ç§æ–¹å¼]]></title>
    <link href="http://sugeladi.github.io/2016/02/26/golang%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
    <id>http://sugeladi.github.io/2016/02/26/golangå­—ç¬¦ä¸²æˆªå–çš„ä¸¤ç§æ–¹å¼/</id>
    <published>2016-02-26T07:54:26.000Z</published>
    <updated>2016-02-29T10:01:27.000Z</updated>
    <content type="html"><![CDATA[<p>æ‰“å°å‡ºæ—¶é—´,å‘ç°é‡‡ç”¨lastIndexè¦æ¯”splitçš„æ–¹å¼è¦å¿«ä¸€äº›.</p>
<h3 id="ç›´æ¥ä¸Šä»£ç ">ç›´æ¥ä¸Šä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main()  &#123;</span><br><span class="line">	name := <span class="string">"a.txh.doc"</span></span><br><span class="line">	t := time.Now()</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++&#123;</span><br><span class="line">		split(name)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Println(time.Now().Sub(t))</span><br><span class="line"></span><br><span class="line">	t1 := time.Now()</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++&#123;</span><br><span class="line">		lastIndex(name)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Println(time.Now().Sub(t1))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> split(name <span class="typename">string</span>) (<span class="typename">int</span>,<span class="typename">string</span>)&#123;</span><br><span class="line">	result := strings.Split(name, <span class="string">"."</span>)</span><br><span class="line">	resultLen := <span class="built_in">len</span>(result)</span><br><span class="line">	<span class="keyword">if</span> resultLen &lt; <span class="number">2</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"0"</span></span><br><span class="line">	&#125;</span><br><span class="line">	filenameWithSuffixToLower := strings.ToLower(result[resultLen-<span class="number">1</span>])</span><br><span class="line">	<span class="keyword">switch</span> filenameWithSuffixToLower &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"pdf"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"1"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"doc"</span>, <span class="string">"docx"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"2"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"xls"</span>, <span class="string">"xlsx"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"3"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"ppt"</span>, <span class="string">"pptx"</span>, <span class="string">"pps"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"4"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"png"</span>, <span class="string">"gif"</span>, <span class="string">"jpeg"</span>, <span class="string">"jpg"</span>, <span class="string">"bmp"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"5"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"txt"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"6"</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"0"</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> lastIndex(name <span class="typename">string</span>) (<span class="typename">int</span>,<span class="typename">string</span>)&#123;</span><br><span class="line">	index := strings.LastIndex(name,<span class="string">"."</span>)</span><br><span class="line">	<span class="keyword">if</span> index &lt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"0"</span></span><br><span class="line">	&#125;</span><br><span class="line">	result := name[index+<span class="number">1</span>:]</span><br><span class="line">	filenameWithSuffixToLower := strings.ToLower(result)</span><br><span class="line">	<span class="keyword">switch</span> filenameWithSuffixToLower &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">"pdf"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"1"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"doc"</span>, <span class="string">"docx"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"2"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"xls"</span>, <span class="string">"xlsx"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"3"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"ppt"</span>, <span class="string">"pptx"</span>, <span class="string">"pps"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"4"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"png"</span>, <span class="string">"gif"</span>, <span class="string">"jpeg"</span>, <span class="string">"jpg"</span>, <span class="string">"bmp"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"5"</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">"txt"</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"6"</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		<span class="keyword">return</span> <span class="number">200</span>, <span class="string">"0"</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>splitå†…éƒ¨çš„å®ç°å¯çœ‹åˆ°æºç (å¦‚ä¸‹),å†…éƒ¨ä¹Ÿæ˜¯å»åšçš„forå¾ªç¯å­—ç¬¦ä¸²æˆªå–åˆ†éš”,æ‰€ä»¥lastIndexç›´æ¥è·å–åˆ°ç´¢å¼•,ç›´æ¥æˆªå–:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Generic split: splits after each instance of sep,</span></span><br><span class="line"><span class="comment">// including sepSave bytes of sep in the subarrays.</span></span><br><span class="line"><span class="keyword">func</span> genSplit(s, sep <span class="typename">string</span>, sepSave, n <span class="typename">int</span>) []<span class="typename">string</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="constant">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> sep == <span class="string">""</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> explode(s, n)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> n &lt; <span class="number">0</span> &#123;</span><br><span class="line">		n = Count(s, sep) + <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	c := sep[<span class="number">0</span>]</span><br><span class="line">	start := <span class="number">0</span></span><br><span class="line">	a := <span class="built_in">make</span>([]<span class="typename">string</span>, n)</span><br><span class="line">	na := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i+<span class="built_in">len</span>(sep) &lt;= <span class="built_in">len</span>(s) &amp;&amp; na+<span class="number">1</span> &lt; n; i++ &#123;</span><br><span class="line">		<span class="keyword">if</span> s[i] == c &amp;&amp; (<span class="built_in">len</span>(sep) == <span class="number">1</span> || s[i:i+<span class="built_in">len</span>(sep)] == sep) &#123;</span><br><span class="line">			a[na] = s[start : i+sepSave]</span><br><span class="line">			na++</span><br><span class="line">			start = i + <span class="built_in">len</span>(sep)</span><br><span class="line">			i += <span class="built_in">len</span>(sep) - <span class="number">1</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	a[na] = s[start:]</span><br><span class="line">	<span class="keyword">return</span> a[<span class="number">0</span> : na+<span class="number">1</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ‰“å°å‡ºæ—¶é—´,å‘ç°é‡‡ç”¨lastIndexè¦æ¯”splitçš„æ–¹å¼è¦å¿«ä¸€äº›.</p>
<h3 id="ç›´æ¥ä¸Šä»£ç ">ç›´æ¥ä¸Šä»£ç </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> main()  &#123;</span><br><span class="line">	name := <span class="string">"a.txh.doc"</span></span><br><span class="line">	t := time.Now()</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++&#123;</span><br><span class="line">		split(name)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Println(time.Now().Sub(t))</span><br><span class="line"></span><br><span class="line">	t1 := time.Now()</span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++&#123;</span><br><span class="line">		lastIndex(name)</span><br><span class="line">	&#125;</span><br><span class="line">	log.Println(time.Now().Sub(t1))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="å°æŠ€å·§" scheme="http://sugeladi.github.io/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[æ¢ä¸ªæ–°çš®è‚¤]]></title>
    <link href="http://sugeladi.github.io/2016/01/28/%E6%8D%A2%E4%B8%AA%E6%96%B0%E7%9A%AE%E8%82%A4/"/>
    <id>http://sugeladi.github.io/2016/01/28/æ¢ä¸ªæ–°çš®è‚¤/</id>
    <published>2016-01-28T06:11:17.000Z</published>
    <updated>2016-01-28T06:38:35.000Z</updated>
    <content type="html"><![CDATA[<p>  ä»Šå¤©çœ‹åˆ°äº†<a href="http://zipperary.com" title="zippera" target="_blank" rel="external">zippera</a> çš„åšå®¢,å¾ˆå–œæ¬¢è¿™ç§æ¸…æ–°ç®€å•é£æ ¼,å¹¶ä¸”ä½œè€…è‡ªå·±ä¹Ÿå†™äº†ä¸€ä¸ªä¸»é¢˜<a href="https://github.com/zippera/lightum" title="lightum" target="_blank" rel="external">lightum</a> ,å¾ˆä¸é”™.<br>  è¿™æ¬¡æ–°æ·»åŠ äº†å·¦ä¸Šæ–¹github/å¾®åš/åˆ†äº«,äº®ç‚¹å°±æ˜¯è¿™ä¸ª<strong>highä¸€ä¸‹</strong>,å¾ˆå¥½ç©,ä½ ä¹Ÿæ¥è¯•è¯•å§~</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>  ä»Šå¤©çœ‹åˆ°äº†<a href="http://zipperary.com" title="zippera" target="_blank" rel="external">zippera</a> çš„åšå®¢,å¾ˆå–œæ¬¢è¿™ç§æ¸…æ–°ç®€å•é£æ ¼,å¹¶ä¸”ä½œè€…è‡ªå·±ä¹Ÿå†™äº†ä¸€ä¸ªä¸»é¢˜<a href="ht]]>
    </summary>
    
      <category term="hexo" scheme="http://sugeladi.github.io/tags/hexo/"/>
    
      <category term="hexo" scheme="http://sugeladi.github.io/categories/hexo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[HTTP/2æ–°ç‰¹æ€§æµ…æ]]></title>
    <link href="http://sugeladi.github.io/2016/01/21/HTTP-2%E6%96%B0%E7%89%B9%E6%80%A7%E6%B5%85%E6%9E%90/"/>
    <id>http://sugeladi.github.io/2016/01/21/HTTP-2æ–°ç‰¹æ€§æµ…æ/</id>
    <published>2016-01-21T03:30:26.000Z</published>
    <updated>2016-01-21T03:45:53.000Z</updated>
    <content type="html"><![CDATA[<p>æ–‡ç« å‡ºå¤„:<a href="http://io.upyun.com/2015/05/13/http2" target="_blank" rel="external">http://io.upyun.com/2015/05/13/http2</a></p>
<h3 id="HTTP/2_æºè‡ª_SPDY/2">HTTP/2 æºè‡ª SPDY/2</h3><h4 id="SPDY_ç³»åˆ—åè®®ç”±è°·æ­Œå¼€å‘ï¼Œäº_2009_å¹´å…¬å¼€ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯é™ä½_50%_çš„é¡µé¢åŠ è½½æ—¶é—´ã€‚å½“ä¸‹å¾ˆå¤šè‘—åçš„äº’è”ç½‘å…¬å¸ï¼Œä¾‹å¦‚ç™¾åº¦ã€æ·˜å®ã€UPYUN_éƒ½åœ¨è‡ªå·±çš„ç½‘ç«™æˆ–_APP_ä¸­é‡‡ç”¨äº†_SPDY_ç³»åˆ—åè®®ï¼ˆå½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯_SPDY/3-1ï¼‰ï¼Œå› ä¸ºå®ƒå¯¹æ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¸»æµçš„æµè§ˆå™¨ï¼ˆè°·æ­Œã€ç«ç‹ã€Operaï¼‰ä¹Ÿéƒ½æ—©å·²ç»æ”¯æŒ_SPDYï¼Œå®ƒå·²ç»æˆä¸ºäº†å·¥ä¸šæ ‡å‡†ï¼ŒHTTP_Working-Group_æœ€ç»ˆå†³å®šä»¥_SPDY/2_ä¸ºåŸºç¡€ï¼Œå¼€å‘_HTTP/2ã€‚">SPDY ç³»åˆ—åè®®ç”±è°·æ­Œå¼€å‘ï¼Œäº 2009 å¹´å…¬å¼€ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯é™ä½ 50% çš„é¡µé¢åŠ è½½æ—¶é—´ã€‚å½“ä¸‹å¾ˆå¤šè‘—åçš„äº’è”ç½‘å…¬å¸ï¼Œä¾‹å¦‚ç™¾åº¦ã€æ·˜å®ã€UPYUN éƒ½åœ¨è‡ªå·±çš„ç½‘ç«™æˆ– APP ä¸­é‡‡ç”¨äº† SPDY ç³»åˆ—åè®®ï¼ˆå½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ SPDY/3.1ï¼‰ï¼Œå› ä¸ºå®ƒå¯¹æ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¸»æµçš„æµè§ˆå™¨ï¼ˆè°·æ­Œã€ç«ç‹ã€Operaï¼‰ä¹Ÿéƒ½æ—©å·²ç»æ”¯æŒ SPDYï¼Œå®ƒå·²ç»æˆä¸ºäº†å·¥ä¸šæ ‡å‡†ï¼ŒHTTP Working-Group æœ€ç»ˆå†³å®šä»¥ SPDY/2 ä¸ºåŸºç¡€ï¼Œå¼€å‘ HTTP/2ã€‚</h4><h2 id="<!-more->"><a id="more"></a></h2><p>ä½†æ˜¯ï¼ŒHTTP/2 è·Ÿ SPDY ä»æœ‰ä¸åŒçš„åœ°æ–¹ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<p>HTTP/2 æ”¯æŒæ˜æ–‡ HTTP ä¼ è¾“ï¼Œè€Œ SPDY å¼ºåˆ¶ä½¿ç”¨ HTTPS<br>HTTP/2 æ¶ˆæ¯å¤´çš„å‹ç¼©ç®—æ³•é‡‡ç”¨ HPACKï¼Œè€Œé SPDY é‡‡ç”¨çš„ DEFLATE</p>
<h2 id="HTTP/2_çš„ä¼˜åŠ¿">HTTP/2 çš„ä¼˜åŠ¿</h2><h4 id="ç›¸æ¯”_HTTP/1-xï¼ŒHTTP/2_åœ¨åº•å±‚ä¼ è¾“åšäº†å¾ˆå¤§çš„æ”¹åŠ¨å’Œä¼˜åŒ–ï¼š">ç›¸æ¯” HTTP/1.xï¼ŒHTTP/2 åœ¨åº•å±‚ä¼ è¾“åšäº†å¾ˆå¤§çš„æ”¹åŠ¨å’Œä¼˜åŒ–ï¼š</h4><ol>
<li>HTTP/2 é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ä¼ è¾“æ•°æ®ï¼Œè€Œé HTTP/1.x çš„æ–‡æœ¬æ ¼å¼ã€‚äºŒè¿›åˆ¶æ ¼å¼åœ¨åè®®çš„è§£æå’Œä¼˜åŒ–æ‰©å±•ä¸Šå¸¦æ¥æ›´å¤šçš„ä¼˜åŠ¿å’Œå¯èƒ½ã€‚   </li>
<li>HTTP/2 å¯¹æ¶ˆæ¯å¤´é‡‡ç”¨ HPACK è¿›è¡Œå‹ç¼©ä¼ è¾“ï¼Œèƒ½å¤ŸèŠ‚çœæ¶ˆæ¯å¤´å ç”¨çš„ç½‘ç»œçš„æµé‡ã€‚è€Œ HTTP/1.x æ¯æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šæºå¸¦å¤§é‡å†—ä½™å¤´ä¿¡æ¯ï¼Œæµªè´¹äº†å¾ˆå¤šå¸¦å®½èµ„æºã€‚å¤´å‹ç¼©èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³è¯¥é—®é¢˜ã€‚</li>
<li>å¤šè·¯å¤ç”¨ï¼Œç›´ç™½çš„è¯´å°±æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯é€šè¿‡ä¸€ä¸ª TCP è¿æ¥å¹¶å‘å®Œæˆã€‚HTTP/1.x è™½ç„¶é€šè¿‡ pipeline ä¹Ÿèƒ½å¹¶å‘è¯·æ±‚ï¼Œä½†æ˜¯å¤šä¸ªè¯·æ±‚ä¹‹é—´çš„å“åº”ä¼šè¢«é˜»å¡çš„ï¼Œæ‰€ä»¥ pipeline è‡³ä»Šä¹Ÿæ²¡æœ‰è¢«æ™®åŠåº”ç”¨ï¼Œè€Œ HTTP/2 åšåˆ°äº†çœŸæ­£çš„å¹¶å‘è¯·æ±‚ã€‚åŒæ—¶ï¼Œæµè¿˜æ”¯æŒä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶ã€‚</li>
<li>Server Pushï¼šæœåŠ¡ç«¯èƒ½å¤Ÿæ›´å¿«çš„æŠŠèµ„æºæ¨é€ç»™å®¢æˆ·ç«¯ã€‚ä¾‹å¦‚æœåŠ¡ç«¯å¯ä»¥ä¸»åŠ¨æŠŠ JS å’Œ CSS æ–‡ä»¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯è§£æ HTML å†å‘é€è¿™äº›è¯·æ±‚ã€‚å½“å®¢æˆ·ç«¯éœ€è¦çš„æ—¶å€™ï¼Œå®ƒå·²ç»åœ¨å®¢æˆ·ç«¯äº†ã€‚</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ–‡ç« å‡ºå¤„:<a href="http://io.upyun.com/2015/05/13/http2">http://io.upyun.com/2015/05/13/http2</a></p>
<h3 id="HTTP/2_æºè‡ª_SPDY/2">HTTP/2 æºè‡ª SPDY/2</h3><h4 id="SPDY_ç³»åˆ—åè®®ç”±è°·æ­Œå¼€å‘ï¼Œäº_2009_å¹´å…¬å¼€ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯é™ä½_50%_çš„é¡µé¢åŠ è½½æ—¶é—´ã€‚å½“ä¸‹å¾ˆå¤šè‘—åçš„äº’è”ç½‘å…¬å¸ï¼Œä¾‹å¦‚ç™¾åº¦ã€æ·˜å®ã€UPYUN_éƒ½åœ¨è‡ªå·±çš„ç½‘ç«™æˆ–_APP_ä¸­é‡‡ç”¨äº†_SPDY_ç³»åˆ—åè®®ï¼ˆå½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯_SPDY/3-1ï¼‰ï¼Œå› ä¸ºå®ƒå¯¹æ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¸»æµçš„æµè§ˆå™¨ï¼ˆè°·æ­Œã€ç«ç‹ã€Operaï¼‰ä¹Ÿéƒ½æ—©å·²ç»æ”¯æŒ_SPDYï¼Œå®ƒå·²ç»æˆä¸ºäº†å·¥ä¸šæ ‡å‡†ï¼ŒHTTP_Working-Group_æœ€ç»ˆå†³å®šä»¥_SPDY/2_ä¸ºåŸºç¡€ï¼Œå¼€å‘_HTTP/2ã€‚">SPDY ç³»åˆ—åè®®ç”±è°·æ­Œå¼€å‘ï¼Œäº 2009 å¹´å…¬å¼€ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯é™ä½ 50% çš„é¡µé¢åŠ è½½æ—¶é—´ã€‚å½“ä¸‹å¾ˆå¤šè‘—åçš„äº’è”ç½‘å…¬å¸ï¼Œä¾‹å¦‚ç™¾åº¦ã€æ·˜å®ã€UPYUN éƒ½åœ¨è‡ªå·±çš„ç½‘ç«™æˆ– APP ä¸­é‡‡ç”¨äº† SPDY ç³»åˆ—åè®®ï¼ˆå½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ SPDY/3.1ï¼‰ï¼Œå› ä¸ºå®ƒå¯¹æ€§èƒ½çš„æå‡æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¸»æµçš„æµè§ˆå™¨ï¼ˆè°·æ­Œã€ç«ç‹ã€Operaï¼‰ä¹Ÿéƒ½æ—©å·²ç»æ”¯æŒ SPDYï¼Œå®ƒå·²ç»æˆä¸ºäº†å·¥ä¸šæ ‡å‡†ï¼ŒHTTP Working-Group æœ€ç»ˆå†³å®šä»¥ SPDY/2 ä¸ºåŸºç¡€ï¼Œå¼€å‘ HTTP/2ã€‚</h4><h2 id="<!-more->">]]>
    
    </summary>
    
      <category term="http2" scheme="http://sugeladi.github.io/tags/http2/"/>
    
      <category term="http" scheme="http://sugeladi.github.io/categories/http/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golangå°æŠ€å·§]]></title>
    <link href="http://sugeladi.github.io/2015/11/13/golang%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <id>http://sugeladi.github.io/2015/11/13/golangå°æŠ€å·§/</id>
    <published>2015-11-13T08:42:25.000Z</published>
    <updated>2016-01-28T07:18:57.000Z</updated>
    <content type="html"><![CDATA[<h3 id="å°æç¤º">å°æç¤º</h3><h5 id="å¯¹äºè¿™æ ·çš„ä»£ç _ï¼š">å¯¹äºè¿™æ ·çš„ä»£ç  ï¼š</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file, err := os.Open(<span class="string">"hx.txt"</span>)</span><br><span class="line"><span class="keyword">defer</span> file.Close()</span><br><span class="line"><span class="keyword">if</span> err != <span class="constant">nil</span> &#123;</span><br><span class="line">    ...  </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>å½“æ–‡ä»¶ studygolang.txt ä¸å­˜åœ¨æˆ–æ‰¾ä¸åˆ°æ—¶ï¼Œfile.Close()ä¼španicï¼Œå› ä¸ºfileæ˜¯nilã€‚å› æ­¤ï¼Œåº”è¯¥å°†defer file.Close()æ”¾åœ¨é”™è¯¯æ£€æŸ¥ä¹‹åã€‚<br>åº”è¯¥è¿™æ ·å†™ï¼š<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file, err := os.Open(<span class="string">"hx.txt"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="constant">nil</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> file.Close()</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="å°æç¤º">å°æç¤º</h3><h5 id="å¯¹äºè¿™æ ·çš„ä»£ç _ï¼š">å¯¹äºè¿™æ ·çš„ä»£ç  ï¼š</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">file, err := os.Open(<span class="string">"hx.txt"</span>)</span><br><span class="line"><span class="keyword">defer</span> file.Close()</span><br><span class="line"><span class="keyword">if</span> err != <span class="constant">nil</span> &#123;</span><br><span class="line">    ...  </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="å°æŠ€å·§" scheme="http://sugeladi.github.io/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    
      <category term="å°æç¤º" scheme="http://sugeladi.github.io/tags/%E5%B0%8F%E6%8F%90%E7%A4%BA/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[golangä¸­ä½¿ç”¨mongodbä¸­çš„sparseç¨€ç–ç´¢å¼•]]></title>
    <link href="http://sugeladi.github.io/2015/10/23/golang%E4%B8%AD%E4%BD%BF%E7%94%A8mongodb%E4%B8%AD%E7%9A%84sparse%E7%A8%80%E7%96%8F%E7%B4%A2%E5%BC%95/"/>
    <id>http://sugeladi.github.io/2015/10/23/golangä¸­ä½¿ç”¨mongodbä¸­çš„sparseç¨€ç–ç´¢å¼•/</id>
    <published>2015-10-23T06:15:10.000Z</published>
    <updated>2015-10-23T06:55:10.000Z</updated>
    <content type="html"><![CDATA[<h3 id="ç¨€ç–ç´¢å¼•">ç¨€ç–ç´¢å¼•</h3><p>â€œsparseâ€çš„ä½œç”¨å°±æ˜¯å½“ç´¢å¼•å­—æ®µåœ¨æ–‡æ¡£ä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¸è¿›å…¥ç´¢å¼•ï¼Œä»è€Œé¿å…å”¯ä¸€ç´¢å¼•é—®é¢˜ã€‚</p>
<h5 id="ä¸¾ä¸ªæ —å­ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨user1ï¼Œæœ‰mobileå­—æ®µï¼Œåœ¨åˆšå¼€å§‹æ³¨å†Œçš„æ—¶å€™,å…è®¸mobileä¸ºç©ºï¼Œä½†å¯¹äºmobileæ¥è¯´éœ€è¦æ˜¯uniqueçš„ï¼Œè¿™æ˜¯å°±ä¸èƒ½å¤Ÿå…è®¸å¤šä¸ªç”¨æˆ·å­˜åœ¨äº†ã€‚è¿™æ—¶å¦‚æœåŠ ä¸Šsparse:true,å°±æ²¡æœ‰é—®é¢˜äº†ã€‚">ä¸¾ä¸ªæ —å­ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨user1ï¼Œæœ‰mobileå­—æ®µï¼Œåœ¨åˆšå¼€å§‹æ³¨å†Œçš„æ—¶å€™,å…è®¸mobileä¸ºç©ºï¼Œä½†å¯¹äºmobileæ¥è¯´éœ€è¦æ˜¯uniqueçš„ï¼Œè¿™æ˜¯å°±ä¸èƒ½å¤Ÿå…è®¸å¤šä¸ªç”¨æˆ·å­˜åœ¨äº†ã€‚è¿™æ—¶å¦‚æœåŠ ä¸Šsparse:true,å°±æ²¡æœ‰é—®é¢˜äº†ã€‚</h5><a id="more"></a>
<h5 id="ç›´æ¥çœ‹ä¾‹å­">ç›´æ¥çœ‹ä¾‹å­</h5><p><div bgcolor="#dddddd"></div></p>
<pre><code>&gt; db.user1.insert({<span class="string">"name"</span>:<span class="string">"hx1"</span>,<span class="string">"mobile"</span>:<span class="number">13912345678</span>})
WriteResult({ <span class="string">"nInserted"</span> : <span class="number">1</span> })
&gt; db.user1.createIndex({mobile:<span class="number">1</span>},{unique:<span class="literal">true</span>})
{
    <span class="string">"createdCollectionAutomatically"</span> : <span class="literal">false</span>,
    <span class="string">"numIndexesBefore"</span> : <span class="number">1</span>,
    <span class="string">"numIndexesAfter"</span> : <span class="number">2</span>,
    <span class="string">"ok"</span> : <span class="number">1</span>
}
&gt; db.user1.find()
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d27de589416ab6babc4c"</span>), <span class="string">"name"</span> : <span class="string">"hx1"</span>, <span class="string">"mobile"</span> : <span class="number">13912345678</span> }
</code></pre><p><br>è¿™æ—¶å€™å¦‚æœåœ¨æ’å…¥å°±ä¼šå‡ºç°duplicate</p>
<pre><code>&gt; db.user1.<span class="keyword">insert</span>({<span class="string">"name"</span>:<span class="string">"hx2"</span>,<span class="string">"mobile"</span>:<span class="number">13912345678</span>})
WriteResult({
    <span class="string">"nInserted"</span> : <span class="number">0</span>,
    <span class="string">"writeError"</span> : {
        <span class="string">"code"</span> : <span class="number">11000</span>,
        <span class="string">"errmsg"</span> : <span class="string">"E11000 duplicate key error index: asot.user1.$mobile_1 dup key: { : 13912345678.0 }"</span>
    }
})
</code></pre><p>å¦‚æœæ’å…¥çš„mobileä¸ºç©ºå€¼,å¯ä»¥æˆåŠŸ</p>
<pre><code>&gt; db.user1.<span class="keyword">insert</span>({<span class="string">"name"</span>:<span class="string">"hx2"</span>})
WriteResult({ <span class="string">"nInserted"</span> : <span class="number">1</span> })
&gt; db.user1.find()
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d50be589416ab6babc50"</span>), <span class="string">"name"</span> : <span class="string">"hx1"</span>, <span class="string">"mobile"</span> : <span class="number">13912345678</span> }
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d52fe589416ab6babc52"</span>), <span class="string">"name"</span> : <span class="string">"hx2"</span> }
</code></pre><p>å½“ç¬¬äºŒæ¬¡å†æ’å…¥çš„æ—¶å€™å°±å¤±è´¥äº†</p>
<pre><code>&gt; db.user1.<span class="keyword">insert</span>({<span class="string">"name"</span>:<span class="string">"hx2"</span>})
WriteResult({
    <span class="string">"nInserted"</span> : <span class="number">0</span>,
    <span class="string">"writeError"</span> : {
        <span class="string">"code"</span> : <span class="number">11000</span>,
        <span class="string">"errmsg"</span> : <span class="string">"E11000 duplicate key error index: asot.user1.$mobile_1 dup key: { : null }"</span>
    }
})
</code></pre><p>å¥½ï¼Œç°åœ¨ç²¾å½©çš„æ¥äº†ï¼Œä½¿ç”¨sparseé…åˆuniqueä¸€èµ·ä½¿ç”¨ã€‚<br>å…ˆæŠŠmobileçš„uniqueå”¯ä¸€ç´¢å¼•åˆ é™¤ï¼Œç„¶åæ·»åŠ sparseé…åˆuniqueå…±åŒç´¢å¼•</p>
<pre><code>&gt; db.user1.dropIndex({mobile:<span class="number">1</span>})
{ <span class="string">"nIndexesWas"</span> : <span class="number">2</span>, <span class="string">"ok"</span> : <span class="number">1</span> }
&gt; db.user1.getIndexes()
[
    {
        <span class="string">"v"</span> : <span class="number">1</span>,
        <span class="string">"key"</span> : {
            <span class="string">"_id"</span> : <span class="number">1</span>
        },
        <span class="string">"name"</span> : <span class="string">"_id_"</span>,
        <span class="string">"ns"</span> : <span class="string">"asot.user1"</span>
    }
]
&gt; db.user1.createIndex({mobile:<span class="number">1</span>},{unique:<span class="literal">true</span>,sparse:<span class="literal">true</span>})
{
    <span class="string">"createdCollectionAutomatically"</span> : <span class="literal">false</span>,
    <span class="string">"numIndexesBefore"</span> : <span class="number">1</span>,
    <span class="string">"numIndexesAfter"</span> : <span class="number">2</span>,
    <span class="string">"ok"</span> : <span class="number">1</span>
}
&gt; db.user1.getIndexes()
[
    {
        <span class="string">"v"</span> : <span class="number">1</span>,
        <span class="string">"key"</span> : {
            <span class="string">"_id"</span> : <span class="number">1</span>
        },
        <span class="string">"name"</span> : <span class="string">"_id_"</span>,
        <span class="string">"ns"</span> : <span class="string">"asot.user1"</span>
    },
    {
        <span class="string">"v"</span> : <span class="number">1</span>,
        <span class="string">"unique"</span> : <span class="literal">true</span>,
        <span class="string">"key"</span> : {
            <span class="string">"mobile"</span> : <span class="number">1</span>
        },
        <span class="string">"name"</span> : <span class="string">"mobile_1"</span>,
        <span class="string">"ns"</span> : <span class="string">"asot.user1"</span>,
        <span class="string">"sparse"</span> : <span class="literal">true</span>
    }
]
</code></pre><p>ç´¢å¼•å·²ç»å»ºå¥½ï¼Œè¿™æ¬¡åœ¨å°è¯•æ’å…¥ç©ºå€¼</p>
<pre><code>&gt; db.user1.find()
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d50be589416ab6babc50"</span>), <span class="string">"name"</span> : <span class="string">"hx1"</span>, <span class="string">"mobile"</span> : 13912345678 }
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d52fe589416ab6babc52"</span>), <span class="string">"name"</span> : <span class="string">"hx2"</span> }
&gt; db.user1.insert({<span class="string">"name"</span>:<span class="string">"hx2"</span>})
WriteResult({ <span class="string">"nInserted"</span> : 1 })
&gt; db.user1.find()
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d50be589416ab6babc50"</span>), <span class="string">"name"</span> : <span class="string">"hx1"</span>, <span class="string">"mobile"</span> : 13912345678 }
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d52fe589416ab6babc52"</span>), <span class="string">"name"</span> : <span class="string">"hx2"</span> }
{ <span class="string">"_id"</span> : ObjectId(<span class="string">"5629d708e589416ab6babc54"</span>), <span class="string">"name"</span> : <span class="string">"hx2"</span> }
</code></pre><p>æ‰“å·¥å‘Šæˆï¼</p>
<p>è°¨è®°ï¼šå¯¹äºgolangæ¥è¯´,structåœ¨æ˜ å°„mongodbè¡¨çš„æ—¶å€™ï¼Œä½¿ç”¨æ—¶éœ€è¦æ·»åŠ  bson:â€,omitemptyâ€ã€‚ å…è®¸ä¸ºç©ºï¼</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="ç¨€ç–ç´¢å¼•">ç¨€ç–ç´¢å¼•</h3><p>â€œsparseâ€çš„ä½œç”¨å°±æ˜¯å½“ç´¢å¼•å­—æ®µåœ¨æ–‡æ¡£ä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¸è¿›å…¥ç´¢å¼•ï¼Œä»è€Œé¿å…å”¯ä¸€ç´¢å¼•é—®é¢˜ã€‚</p>
<h5 id="ä¸¾ä¸ªæ —å­ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨user1ï¼Œæœ‰mobileå­—æ®µï¼Œåœ¨åˆšå¼€å§‹æ³¨å†Œçš„æ—¶å€™,å…è®¸mobileä¸ºç©ºï¼Œä½†å¯¹äºmobileæ¥è¯´éœ€è¦æ˜¯uniqueçš„ï¼Œè¿™æ˜¯å°±ä¸èƒ½å¤Ÿå…è®¸å¤šä¸ªç”¨æˆ·å­˜åœ¨äº†ã€‚è¿™æ—¶å¦‚æœåŠ ä¸Šsparse:true,å°±æ²¡æœ‰é—®é¢˜äº†ã€‚">ä¸¾ä¸ªæ —å­ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨user1ï¼Œæœ‰mobileå­—æ®µï¼Œåœ¨åˆšå¼€å§‹æ³¨å†Œçš„æ—¶å€™,å…è®¸mobileä¸ºç©ºï¼Œä½†å¯¹äºmobileæ¥è¯´éœ€è¦æ˜¯uniqueçš„ï¼Œè¿™æ˜¯å°±ä¸èƒ½å¤Ÿå…è®¸å¤šä¸ªç”¨æˆ·å­˜åœ¨äº†ã€‚è¿™æ—¶å¦‚æœåŠ ä¸Šsparse:true,å°±æ²¡æœ‰é—®é¢˜äº†ã€‚</h5>]]>
    
    </summary>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="mongodb" scheme="http://sugeladi.github.io/tags/mongodb/"/>
    
      <category term="sparse" scheme="http://sugeladi.github.io/tags/sparse/"/>
    
      <category term="mongodb" scheme="http://sugeladi.github.io/categories/mongodb/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å…³äºgolangä¸­deferä½ ä¸çŸ¥é“çš„äº‹]]></title>
    <link href="http://sugeladi.github.io/2015/10/15/%E5%85%B3%E4%BA%8Egolang%E4%B8%ADdefer%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84%E4%BA%8B/"/>
    <id>http://sugeladi.github.io/2015/10/15/å…³äºgolangä¸­deferä½ ä¸çŸ¥é“çš„äº‹/</id>
    <published>2015-10-15T03:23:28.000Z</published>
    <updated>2015-10-15T03:40:12.000Z</updated>
    <content type="html"><![CDATA[<p>æ–‡ç« å‡ºå¤„:<a href="http://www.xiaozhou.net/something-about-defer-2014-05-25.html" target="_blank" rel="external">http://www.xiaozhou.net/something-about-defer-2014-05-25.html</a></p>
<h3 id="Golangä¸­çš„deferå…³é”®å­—å®ç°æ¯”è¾ƒç‰¹æ®Šçš„åŠŸèƒ½ï¼ŒæŒ‰ç…§å®˜æ–¹çš„è§£é‡Šï¼Œdeferåé¢çš„è¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨å½“å‰æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œåˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼å°±ä¼šè¢«æ‰§è¡Œã€‚ä¸€ä¸ªæ–¹æ³•ä¸­å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªåœ°æ–¹ä½¿ç”¨deferè¡¨è¾¾å¼ï¼Œè¿™ä¹Ÿæ˜¯å‰é¢æåˆ°çš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¿™äº›è¡¨è¾¾å¼ã€‚åœ¨Golangä¸­ï¼Œdeferè¡¨è¾¾å¼é€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›æ¸…ç†å’Œé‡Šæ”¾èµ„æºçš„æ“ä½œ">Golangä¸­çš„deferå…³é”®å­—å®ç°æ¯”è¾ƒç‰¹æ®Šçš„åŠŸèƒ½ï¼ŒæŒ‰ç…§å®˜æ–¹çš„è§£é‡Šï¼Œdeferåé¢çš„è¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨å½“å‰æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œåˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼å°±ä¼šè¢«æ‰§è¡Œã€‚ä¸€ä¸ªæ–¹æ³•ä¸­å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªåœ°æ–¹ä½¿ç”¨deferè¡¨è¾¾å¼ï¼Œè¿™ä¹Ÿæ˜¯å‰é¢æåˆ°çš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¿™äº›è¡¨è¾¾å¼ã€‚åœ¨Golangä¸­ï¼Œdeferè¡¨è¾¾å¼é€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›æ¸…ç†å’Œé‡Šæ”¾èµ„æºçš„æ“ä½œ</h3><h2 id="<!-more->"><a id="more"></a></h2><h1 id="deferè¡¨è¾¾å¼ä¸­å˜é‡çš„å€¼åœ¨deferè¡¨è¾¾å¼è¢«å®šä¹‰æ—¶å°±å·²ç»æ˜ç¡®">deferè¡¨è¾¾å¼ä¸­å˜é‡çš„å€¼åœ¨deferè¡¨è¾¾å¼è¢«å®šä¹‰æ—¶å°±å·²ç»æ˜ç¡®</h1><p>func a() {<br>    i := 0<br>    defer fmt.Println(i)<br>    i++<br>    return<br>}</p>
<h3 id="ä¸Šé¢çš„è¿™æ®µä»£ç ï¼Œdeferè¡¨è¾¾å¼ä¸­ç”¨åˆ°äº†iè¿™ä¸ªå˜é‡ï¼Œiåœ¨åˆå§‹åŒ–ä¹‹åçš„å€¼ä¸º0ï¼Œæ¥ç€ç¨‹åºæ‰§è¡Œåˆ°deferè¡¨è¾¾å¼è¿™ä¸€è¡Œï¼Œè¡¨è¾¾å¼æ‰€ç”¨åˆ°çš„içš„å€¼å°±ä¸º0äº†ï¼Œæ¥ç€ï¼Œè¡¨è¾¾å¼è¢«æ”¾å…¥listï¼Œç­‰å¾…åœ¨returnçš„æ—¶å€™è¢«è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œåé¢å°½ç®¡æœ‰ä¸€ä¸ªi++è¯­å¥ï¼Œä»ç„¶ä¸èƒ½æ”¹å˜è¡¨è¾¾å¼_fmt-Println(i)çš„ç»“æœã€‚æ‰€ä»¥ï¼Œç¨‹åºè¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯0è€Œä¸æ˜¯1ã€‚">ä¸Šé¢çš„è¿™æ®µä»£ç ï¼Œdeferè¡¨è¾¾å¼ä¸­ç”¨åˆ°äº†iè¿™ä¸ªå˜é‡ï¼Œiåœ¨åˆå§‹åŒ–ä¹‹åçš„å€¼ä¸º0ï¼Œæ¥ç€ç¨‹åºæ‰§è¡Œåˆ°deferè¡¨è¾¾å¼è¿™ä¸€è¡Œï¼Œè¡¨è¾¾å¼æ‰€ç”¨åˆ°çš„içš„å€¼å°±ä¸º0äº†ï¼Œæ¥ç€ï¼Œè¡¨è¾¾å¼è¢«æ”¾å…¥listï¼Œç­‰å¾…åœ¨returnçš„æ—¶å€™è¢«è°ƒç”¨ã€‚æ‰€ä»¥ï¼Œåé¢å°½ç®¡æœ‰ä¸€ä¸ªi++è¯­å¥ï¼Œä»ç„¶ä¸èƒ½æ”¹å˜è¡¨è¾¾å¼ fmt.Println(i)çš„ç»“æœã€‚æ‰€ä»¥ï¼Œç¨‹åºè¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯0è€Œä¸æ˜¯1ã€‚</h3><hr>
<h1 id="deferè¡¨è¾¾å¼çš„è°ƒç”¨é¡ºåºæ˜¯æŒ‰ç…§å…ˆè¿›åå‡ºçš„æ–¹å¼">deferè¡¨è¾¾å¼çš„è°ƒç”¨é¡ºåºæ˜¯æŒ‰ç…§å…ˆè¿›åå‡ºçš„æ–¹å¼</h1><p>func b() {<br>    defer fmt.Print(1)<br>    defer fmt.Print(2)<br>    defer fmt.Print(3)<br>    defer fmt.Print(4)<br>}</p>
<h3 id="deferè¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªç±»ä¼¼äºæ ˆ(stack)çš„ç»“æ„ï¼Œæ‰€ä»¥è°ƒç”¨çš„é¡ºåºæ˜¯åè¿›å…ˆå‡ºçš„ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™æ®µä»£ç è¾“å‡ºçš„ç»“æœæ˜¯4321è€Œä¸æ˜¯1234ã€‚åœ¨å®é™…çš„ç¼–ç ä¸­åº”è¯¥ä¸»æ„ï¼Œç¨‹åºåé¢çš„deferè¡¨è¾¾å¼ä¼šè¢«ä¼˜å…ˆæ‰§è¡Œã€‚">deferè¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªç±»ä¼¼äºæ ˆ(stack)çš„ç»“æ„ï¼Œæ‰€ä»¥è°ƒç”¨çš„é¡ºåºæ˜¯åè¿›å…ˆå‡ºçš„ã€‚æ‰€ä»¥ï¼Œä¸Šé¢è¿™æ®µä»£ç è¾“å‡ºçš„ç»“æœæ˜¯4321è€Œä¸æ˜¯1234ã€‚åœ¨å®é™…çš„ç¼–ç ä¸­åº”è¯¥ä¸»æ„ï¼Œç¨‹åºåé¢çš„deferè¡¨è¾¾å¼ä¼šè¢«ä¼˜å…ˆæ‰§è¡Œã€‚</h3><hr>
<h1 id="deferè¡¨è¾¾å¼ä¸­å¯ä»¥ä¿®æ”¹å‡½æ•°ä¸­çš„å‘½åè¿”å›å€¼">deferè¡¨è¾¾å¼ä¸­å¯ä»¥ä¿®æ”¹å‡½æ•°ä¸­çš„å‘½åè¿”å›å€¼</h1><p>func c() (i int) {<br>    defer func() { i++ }()<br>    return 1<br>}</p>
<h3 id="ä¸Šé¢çš„ç¤ºä¾‹ç¨‹åºï¼Œè¿”å›å€¼å˜é‡åä¸ºiï¼Œåœ¨deferè¡¨è¾¾å¼ä¸­å¯ä»¥ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œè™½ç„¶åœ¨returnçš„æ—¶å€™ç»™è¿”å›å€¼èµ‹å€¼ä¸º1ï¼Œåæ¥deferä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œè®©iè‡ªå¢äº†1ï¼Œæ‰€ä»¥ï¼Œå‡½æ•°çš„è¿”å›å€¼æ˜¯2è€Œä¸æ˜¯1ã€‚">ä¸Šé¢çš„ç¤ºä¾‹ç¨‹åºï¼Œè¿”å›å€¼å˜é‡åä¸ºiï¼Œåœ¨deferè¡¨è¾¾å¼ä¸­å¯ä»¥ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ã€‚æ‰€ä»¥ï¼Œè™½ç„¶åœ¨returnçš„æ—¶å€™ç»™è¿”å›å€¼èµ‹å€¼ä¸º1ï¼Œåæ¥deferä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œè®©iè‡ªå¢äº†1ï¼Œæ‰€ä»¥ï¼Œå‡½æ•°çš„è¿”å›å€¼æ˜¯2è€Œä¸æ˜¯1ã€‚</h3>]]></content>
    <summary type="html">
    <![CDATA[<p>æ–‡ç« å‡ºå¤„:<a href="http://www.xiaozhou.net/something-about-defer-2014-05-25.html">http://www.xiaozhou.net/something-about-defer-2014-05-25.html</a></p>
<h3 id="Golangä¸­çš„deferå…³é”®å­—å®ç°æ¯”è¾ƒç‰¹æ®Šçš„åŠŸèƒ½ï¼ŒæŒ‰ç…§å®˜æ–¹çš„è§£é‡Šï¼Œdeferåé¢çš„è¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨å½“å‰æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œåˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼å°±ä¼šè¢«æ‰§è¡Œã€‚ä¸€ä¸ªæ–¹æ³•ä¸­å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªåœ°æ–¹ä½¿ç”¨deferè¡¨è¾¾å¼ï¼Œè¿™ä¹Ÿæ˜¯å‰é¢æåˆ°çš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¿™äº›è¡¨è¾¾å¼ã€‚åœ¨Golangä¸­ï¼Œdeferè¡¨è¾¾å¼é€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›æ¸…ç†å’Œé‡Šæ”¾èµ„æºçš„æ“ä½œ">Golangä¸­çš„deferå…³é”®å­—å®ç°æ¯”è¾ƒç‰¹æ®Šçš„åŠŸèƒ½ï¼ŒæŒ‰ç…§å®˜æ–¹çš„è§£é‡Šï¼Œdeferåé¢çš„è¡¨è¾¾å¼ä¼šè¢«æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œåœ¨å½“å‰æ–¹æ³•è¿”å›çš„æ—¶å€™ï¼Œåˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼å°±ä¼šè¢«æ‰§è¡Œã€‚ä¸€ä¸ªæ–¹æ³•ä¸­å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªåœ°æ–¹ä½¿ç”¨deferè¡¨è¾¾å¼ï¼Œè¿™ä¹Ÿæ˜¯å‰é¢æåˆ°çš„ï¼Œä¸ºä»€ä¹ˆéœ€è¦ç”¨ä¸€ä¸ªåˆ—è¡¨æ¥ä¿å­˜è¿™äº›è¡¨è¾¾å¼ã€‚åœ¨Golangä¸­ï¼Œdeferè¡¨è¾¾å¼é€šå¸¸ç”¨æ¥å¤„ç†ä¸€äº›æ¸…ç†å’Œé‡Šæ”¾èµ„æºçš„æ“ä½œ</h3><h2 id="<!-more->">]]>
    
    </summary>
    
      <category term="defer" scheme="http://sugeladi.github.io/tags/defer/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/tags/golang/"/>
    
      <category term="golang" scheme="http://sugeladi.github.io/categories/golang/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World ä½ å¥½ä¸–ç•Œ]]></title>
    <link href="http://sugeladi.github.io/2015/10/15/hello-world/"/>
    <id>http://sugeladi.github.io/2015/10/15/hello-world/</id>
    <published>2015-10-15T03:22:11.000Z</published>
    <updated>2015-10-15T03:22:11.000Z</updated>
    <content type="html"><![CDATA[<h3 id="æ¬¢è¿å…‰ä¸´">æ¬¢è¿å…‰ä¸´</h3><a id="more"></a>
<p>æ¬¢è¿å…‰ä¸´,å¼€å§‹åšå®¢ä¹‹æ—…~</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="æ¬¢è¿å…‰ä¸´">æ¬¢è¿å…‰ä¸´</h3>]]>
    
    </summary>
    
  </entry>
  
</feed>
